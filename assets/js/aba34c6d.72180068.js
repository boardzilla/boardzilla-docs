"use strict";(self.webpackChunkboardzilla_docs=self.webpackChunkboardzilla_docs||[]).push([[6762],{908:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var a=t(5893),o=t(1151);const s={sidebar_position:3},l="Layout",i={id:"ui/layout",title:"Layout",description:"Customizing the game UI probably requires declaring several layouts. Each layout",source:"@site/docs/ui/layout.md",sourceDirName:"ui",slug:"/ui/layout",permalink:"/ui/layout",draft:!1,unlisted:!1,editUrl:"https://github.com/boardzilla/boardzilla-docs/tree/main/docs/ui/layout.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Customizing the UI",permalink:"/ui/customizing-ui"},next:{title:"Layout sandbox",permalink:"/ui/layout-sandbox"}},r={},c=[{value:"Layout parameters",id:"layout-parameters",level:2},{value:"Customize Controls",id:"customize-controls",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"layout",children:"Layout"}),"\n",(0,a.jsx)(n.p,{children:"Customizing the game UI probably requires declaring several layouts. Each layout\nprovides a strategy how a given Space visually lays out the elements inside\nit. Each layout declaration has 3 parts:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.strong,{children:"container"})," that uses this layout"]}),"\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.strong,{children:"contents"})," that it applies to"]}),"\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.strong,{children:"rules"})," for the layout"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"container"})," could be the Game, or any Element or group of elements in the\ngame. These are usually Spaces, but can also be Pieces if you ever put Pieces on\ntop of other Pieces. The ",(0,a.jsx)(n.strong,{children:"contents"})," are always ",(0,a.jsx)(n.em,{children:"immediate"})," children of the\n",(0,a.jsx)(n.strong,{children:"container"}),". Often the layout applies to all Pieces in the ",(0,a.jsx)(n.strong,{children:"container"}),", but\nsometimes just to a subset, or even just to one particular element. The\n",(0,a.jsx)(n.strong,{children:"rules"})," are the meat of the layout, and contain all the declarations for\nsizing, overlapping, stretching, alignment, etc."]}),"\n",(0,a.jsx)(n.p,{children:"Here's a typical example of a layout declaration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"  $.deck.layout(Card, { alignment: 'left' }\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In this example, the ",(0,a.jsx)(n.strong,{children:"container"})," is the deck space ",(0,a.jsx)(n.code,{children:"$.deck"}),", the ",(0,a.jsx)(n.strong,{children:"contents"}),"\nare any ",(0,a.jsx)(n.code,{children:"Card"}),"s in the deck, and the ",(0,a.jsx)(n.strong,{children:"rules"})," are that these cards should left\nalign."]}),"\n",(0,a.jsx)(n.p,{children:"Layout declarations might declare that for a given area, items should be laid\nout in a row, or a stack, or a grid. When many items enter the same space, it\nmight declare whether they should scale down to fit, should squish together, or\nwhether only a certain number of them should actually be visible."}),"\n",(0,a.jsxs)(n.p,{children:["All layout declarations go in the ",(0,a.jsx)(n.code,{children:"layout"})," of the main\n",(0,a.jsx)(n.a,{href:"../api/modules#render",children:(0,a.jsx)(n.code,{children:"render"})})," function, e.g.:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"  render(setup, {\n    ...\n    layout: game => {\n      // layout declarations go here\n    }\n\n  });\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"experiment",type:"tip",children:(0,a.jsxs)(n.p,{children:["The Boardzilla layout engine is powerful and can be complicated, but it is easy\nto just try things and observe their effects in real-time as you play test. The\n",(0,a.jsx)(n.a,{href:"layout-sandbox",children:"sandbox"})," is also available as a means of experiementing to get\na feel for how it works."]})}),"\n",(0,a.jsxs)(n.p,{children:["The layout engine works by applying different layout strategies to different\ngame elements. By default, each element has a simple layout that divides up its\nspace equally to hold as many items as it has and fits them exactly within the\nallotted space. This is the layout you see when you start building your\nboard. Each layout strategy you apply creates a new invisible grid layer on top\nin which things can fit. This invisible grid will grow or shrink as needed to\nfill as much of the area as it can. Layouts are applied by calling\n",(0,a.jsx)(n.a,{href:"../api/classes/GameElement#layout",children:(0,a.jsx)(n.code,{children:"layout"})})," on an element or ",(0,a.jsx)(n.a,{href:"../api/classes/ElementCollection#layout",children:"group of\nelements"}),". When you apply a new layout\nto a space, you declare what element(s), or class of elements, it should apply\nto. Any element that enters this space gets put into one of the layouts\ndepending on whether it applies. If multiple layouts apply, Boardzilla\nprioritizes from more specific to more general (e.g. a specific element\noverrides one that applies to a class of elements). If no layouts apply, the\ndefault layout gets applied at the very bottom."]}),"\n",(0,a.jsx)(n.p,{children:"Each layout in a space operates completely independently of the others in that\nspace. E.g. if you have a space that might have both Cards and Tokens in it and\nyou apply one layout to Cards and another to Tokens, each Card and Token in that\nspace will be laid out in accordance with its respective layout rules, but Cards\nwill not affect how Tokens are laid out, and vice versa. They are therefore\ncompletely free to overlap each other if the layouts use the same area. Later\nlayouts will appear over top of earlier ones in this case."}),"\n",(0,a.jsx)(n.div,{style:{textAlign:"center"},children:(0,a.jsx)(n.img,{src:"/img/layouts.svg"})}),"\n",(0,a.jsx)(n.p,{children:"In the example pictured here, two layouts are declared for a space, one for\nCircle elements and one for Rectangle elements. Each declares a different grid\nfor their respective elements. When Circles and Rectangles are both added to the\nspace, they overlap each other without interfering with each others grid. The\nlast one declared (Rectangles) appears on top."}),"\n",(0,a.jsx)(n.h2,{id:"layout-parameters",children:"Layout parameters"}),"\n",(0,a.jsxs)(n.p,{children:["Creating a layout for an area of the board is a series of questions, with\ndifferent ",(0,a.jsx)(n.a,{href:"../api/modules#layoutattributes",children:"parameters"})," used to answer each one."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["What part of the area should be used to display its contents? (",(0,a.jsx)(n.code,{children:"area"})," or\n",(0,a.jsx)(n.code,{children:"margin"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["How large should the grid be to accommodate its contents? (",(0,a.jsx)(n.code,{children:"rows"})," and\n",(0,a.jsx)(n.code,{children:"columns"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["How tightly should they be packed? (",(0,a.jsx)(n.code,{children:"gap"})," or ",(0,a.jsx)(n.code,{children:"offsetRow"}),"/",(0,a.jsx)(n.code,{children:"offsetColumn"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["Should they be in a square grid, or something non-orthogonal like a hexagon?\n(",(0,a.jsx)(n.code,{children:"gap"})," or ",(0,a.jsx)(n.code,{children:"offsetRow"}),"/",(0,a.jsx)(n.code,{children:"offsetColumn"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["How should they fill up their grid as more are added? (",(0,a.jsx)(n.code,{children:"direction"}),",\n",(0,a.jsx)(n.code,{children:"alignment"})," and ",(0,a.jsx)(n.code,{children:"limit"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["How should they stretch, shrink, or squish together to fit in the area?\n(",(0,a.jsx)(n.code,{children:"scaling"})," and ",(0,a.jsx)(n.code,{children:"maxOverlap"}),")"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["How these parameters interact can become complicated. The best approach is to\nexperiment in order to find what you're looking for. A helpful ",(0,a.jsx)(n.a,{href:"layout-sandbox",children:"layout\nsandbox"})," is provided here to let you try different parameters\nand see the results with different elements. Also browsing the ",(0,a.jsx)(n.a,{href:"/examples/examples",children:"sample\ngames"})," to see how their layouts work is a good resource. Of\ncourse, refer to ",(0,a.jsx)(n.a,{href:"../api/modules#layoutattributes",children:"the API documentation"})," for\nthe complete descriptions."]}),"\n",(0,a.jsxs)(n.admonition,{title:"relative percentages",type:"tip",children:[(0,a.jsxs)(n.p,{children:["Most of the sizing attributes in the ",(0,a.jsx)(n.code,{children:"layout"})," parameters are percentage\nvalues. These are generally percentages of the container element's layout, so\ne.g."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"  $.deck.layout(Card, {\n    area: { left: 25, top: 25, width: 50, height: 50 },\n  });\n"})}),(0,a.jsxs)(n.p,{children:["Would place the ",(0,a.jsx)(n.code,{children:"Card"}),"s in the ",(0,a.jsx)(n.code,{children:"deck"})," space into an inner region that is 50% of\nthe deck's width and height."]})]}),"\n",(0,a.jsxs)(n.p,{children:["Note that the layout code is evaluated every time the board changes, so if\ne.g. you have a layout on ",(0,a.jsx)(n.code,{children:"$.field"})," for ",(0,a.jsx)(n.em,{children:"only"})," the cards for which ",(0,a.jsx)(n.code,{children:"card.color"}),"\nis ",(0,a.jsx)(n.code,{children:'"red"'}),", then the ",(0,a.jsx)(n.code,{children:"layout"})," declaration might look like:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'  $.field.layout(\n    $.field.all(Card, {color: "red"}), {\n      ...\n    }\n  );\n'})}),"\n",(0,a.jsxs)(n.p,{children:["This will be applied to each ",(0,a.jsx)(n.code,{children:"Card"})," in the ",(0,a.jsx)(n.code,{children:"field"})," Space with ",(0,a.jsx)(n.code,{children:"color"})," equal to\n",(0,a.jsx)(n.code,{children:'"red"'}),", and as cards enter or leave the field or change color, the layout will\nautomatically be re-applied given the new set of red cards in the field."]}),"\n",(0,a.jsx)(n.admonition,{title:"layout bounding box",type:"tip",children:(0,a.jsxs)(n.p,{children:["While working on a particular layout declaration, adding a ",(0,a.jsx)(n.code,{children:"showBoundingBox"}),"\nattribute causes the layout's area to visibly appear on screen as a dotted\nbounding box. You can give every layout a bounding box by calling\n",(0,a.jsx)(n.code,{children:"game.showLayoutBoundingBoxes()"}),". This is an easy way to visually see if your\nlayout is correct."]})}),"\n",(0,a.jsxs)(n.p,{children:["Layouts can also be applied to multiple elements at once by calling ",(0,a.jsx)(n.code,{children:"layout"})," on\nan ",(0,a.jsx)(n.code,{children:"ElementCollection"}),". For example, in a card game you would typically supply\nlayout for all the player's hands with some common rules, e.g.:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"  game.all('hand').layout(Card, {\n    columns: { min: 8 },\n    rows: 1,\n  });\n"})}),"\n",(0,a.jsx)(n.h2,{id:"customize-controls",children:"Customize Controls"}),"\n",(0,a.jsx)(n.p,{children:"The controls (floating boxes with player prompts and inputs) can have their\nlocation customized to be contextual with the action taken. There are three\nmethods for controlling placement of these, depending on whether you want the\nplacement to be specific to an Action or specific to a step in the Flow, or\ngeneral to all:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutaction",children:(0,a.jsx)(n.code,{children:"game.layoutAction"})})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutstep",children:(0,a.jsx)(n.code,{children:"game.layoutStep"})})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutcontrols",children:(0,a.jsx)(n.code,{children:"game.layoutControls"})})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["These all apply layout rules to a control by specifying the\n",(0,a.jsx)(n.a,{href:"../game/actions",children:(0,a.jsx)(n.code,{children:"Action"})})," in the case of\n",(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutaction",children:(0,a.jsx)(n.code,{children:"game.layoutAction"})}),", or the\n",(0,a.jsx)(n.a,{href:"../game/flow#player-actions",children:(0,a.jsx)(n.code,{children:"playerActions.name"})})," in the case of\n",(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutstep",children:(0,a.jsx)(n.code,{children:"game.layoutStep"})}),". Finally,\n",(0,a.jsx)(n.a,{href:"../api/classes/Game#layoutcontrols",children:(0,a.jsx)(n.code,{children:"game.layoutControls"})})," applies to all steps\nand actions unless a more specific one applies. Whichever function you use, you\nthen provide parameters to anchor it to the player's view of the game in a\nparticular location. This is to allow your game to place these in a suitable\nlocation of the playing area that corresponds to the action needed, and does not\nobscure game elements. See ",(0,a.jsx)(n.a,{href:"../api/modules#actionlayout",children:(0,a.jsx)(n.code,{children:"ActionLayout"})})," for\ndetails."]}),"\n",(0,a.jsx)(n.p,{children:"Example to place all prompts in the top center of the overall playing area:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"  game.layoutControls({\n    element: game,\n    top: 0,\n    center: 50,\n    width: 20\n  });\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The controls can also be targetted with CSS like all Boardzilla elements. The\ncontrols box always have the HTML class ",(0,a.jsx)(n.code,{children:"player-controls"})," applied, and other\nclasses are used for specific elements and actions. See ",(0,a.jsx)(n.a,{href:"css",children:"CSS"})," for details."]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>l});var a=t(7294);const o={},s=a.createContext(o);function l(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);