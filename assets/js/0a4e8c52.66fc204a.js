"use strict";(self.webpackChunkboardzilla_docs=self.webpackChunkboardzilla_docs||[]).push([[751],{5130:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=n(5893),o=n(1151);const r={},c="Testing",a={id:"cookbook/testing",title:"Testing",description:"Recipies about testing your game logic.",source:"@site/docs/cookbook/testing.md",sourceDirName:"cookbook",slug:"/cookbook/testing",permalink:"/cookbook/testing",draft:!1,unlisted:!1,editUrl:"https://github.com/boardzilla/boardzilla-docs/tree/main/docs/cookbook/testing.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Miscellaneuous",permalink:"/cookbook/misc"},next:{title:"UI Development",permalink:"/cookbook/ui"}},i={},l=[{value:"Creating Tests",id:"creating-tests",level:2},{value:"Getting Access To Player Objects",id:"getting-access-to-player-objects",level:2},{value:"Getting Access To The Game Object",id:"getting-access-to-the-game-object",level:2},{value:"Creating Mock Objects",id:"creating-mock-objects",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(t.p,{children:"Recipies about testing your game logic."}),"\n",(0,s.jsx)(t.h2,{id:"creating-tests",children:"Creating Tests"}),"\n",(0,s.jsxs)(t.p,{children:["Create tests in the ",(0,s.jsx)(t.code,{children:"test"})," folder. Each of your test files should end with ",(0,s.jsx)(t.code,{children:".test.ts"}),". For example ",(0,s.jsx)(t.code,{children:"game.test.ts"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The contents of the file would look something like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { expect, test, beforeEach } from "vitest";\nimport { TestRunner } from "@boardzilla/core";\nimport {\n  MyGame,\n  SevenPlayer,\n  Card,\n  default as setup,\n} from "../src/game/index.js";\n\nlet runner: TestRunner<MyPlayer, MyGame>;\n\nbeforeEach(() => {\n  runner = new TestRunner(setup);\n});\n\ntest("test setup", () => {\n  const [p1, p2] = runner.start({\n    players: 2,\n    settings: {},\n  });\n  expect(runner.server.game.round).toBe(1);\n});\n'})}),"\n",(0,s.jsx)(t.p,{children:"Obviously adding more tests to the file as you go on."}),"\n",(0,s.jsx)(t.h2,{id:"getting-access-to-player-objects",children:"Getting Access To Player Objects"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"p1"})," and ",(0,s.jsx)(t.code,{children:"p2"})," from the example above gives you access to player data, but the ",(0,s.jsx)(t.code,{children:"player"})," object is actually an attribute of each of those objects."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'p1.player.my("hand")?.all().putInto(runner.server.game.first("discard")!);\n'})}),"\n",(0,s.jsx)(t.h2,{id:"getting-access-to-the-game-object",children:"Getting Access To The Game Object"}),"\n",(0,s.jsxs)(t.p,{children:["All of the server accessible objects, including ",(0,s.jsx)(t.code,{children:"game"})," are on ",(0,s.jsx)(t.code,{children:"runner.server"})," like so:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'runner.server.game.first("draw");\n'})}),"\n",(0,s.jsx)(t.h2,{id:"creating-mock-objects",children:"Creating Mock Objects"}),"\n",(0,s.jsx)(t.p,{children:"For unit testing it is often useful to create mock objects, such as a hand of cards."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { MyGame, Space, Card } from "../src/game/index.js";\n\nconst game = new MyGame();\n'})}),"\n",(0,s.jsx)(t.p,{children:"Then use that mock game object to create mock components with whatever\nproperties they need for testing:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const card1 = game.create(Card, "card1", { value: 2 });\nconst card1 = game.create(Card, "card2", { value: 7 });\nconst card1 = game.create(Card, "card3", { value: 4 });\n'})})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>c});var s=n(7294);const o={},r=s.createContext(o);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);