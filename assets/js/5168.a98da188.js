(self.webpackChunkboardzilla_docs=self.webpackChunkboardzilla_docs||[]).push([[5168],{3796:t=>{t.exports=function(t,e){var n=e.length;if(0!==n){var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}}},2012:(t,e,n)=>{var i=n(4453);function r(t){this.graph=t,this.queue=new i(Array,t.order),this.seen=new Set,this.size=0}r.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},r.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},r.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,n=this.graph;n.someNode((function(i,r){return e.size===n.order||!e.has(i)&&!!t(i,r)}))},r.prototype.has=function(t){return this.seen.has(t)},r.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e!==this.seen.size&&(this.queue.push(t),this.size++,!0)},r.prototype.pushWith=function(t,e){var n=this.seen.size;return this.seen.add(t),n!==this.seen.size&&(this.queue.push(e),this.size++,!0)},r.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t},t.exports=r},1341:t=>{function e(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}e.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},e.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},e.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,n=this.graph;n.someNode((function(i,r){return e.size===n.order||!e.has(i)&&!!t(i,r)}))},e.prototype.has=function(t){return this.seen.has(t)},e.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e!==this.seen.size&&(this.stack[this.size++]=t,!0)},e.prototype.pushWith=function(t,e){var n=this.seen.size;return this.seen.add(t),n!==this.seen.size&&(this.stack[this.size++]=e,!0)},e.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]},t.exports=e},6416:(t,e,n)=>{var i=n(6186),r=n(2308).Q6,o=n(7972),a="weight";function s(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0}function c(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}e.bidirectional=function(t,e,n,c){return function(t,e,n,c){if(e=""+e,n=""+n,!i(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!t.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(n&&!t.hasNode(n))throw new Error('graphology-shortest-path/dijkstra: the "'+n+'" target node does not exist in the given graph.');if(c=r(c||a).fromMinimalEntry,e===n)return[0,[e]];var h=[{},{}],u=[{},{}],d=[new o(s),new o(s)],f=[{},{}];u[0][e]=[e],u[1][n]=[n],f[0][e]=0,f[1][n]=0;var p,l,g,y,m,w,v,b,_,x=[],E=1/0,k=0,A=1;for(d[0].push([0,k++,e]),d[1].push([0,k++,n]);d[0].size&&d[1].size;)if(y=(p=d[A=1-A].pop())[0],!((m=p[2])in h[A])){if(h[A][m]=y,m in h[1-A])return[E,x];for(b=0,_=(l=1===A?t.inboundEdges(m):t.outboundEdges(m)).length;b<_;b++){if(v=l[b],w=t.opposite(m,v),g=h[A][m]+c(v,t.getEdgeAttributes(v)),w in h[A]&&g<h[A][w])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(w in f[A])||g<f[A][w])&&(f[A][w]=g,d[A].push([g,k++,w]),u[A][w]=u[A][m].concat(w),w in f[0]&&w in f[1]&&(y=f[0][w]+f[1][w],(0===x.length||E>y)&&(E=y,x=u[0][w].concat(u[1][w].slice(0,-1).reverse()))))}}return[1/0,null]}(t,e,n,c)[1]},e.singleSource=function(t,e,n){var c={};return function(t,e,n,c,h,u){if(!i(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(h&&!t.hasNode(h))throw new Error('graphology-shortest-path/dijkstra: the "'+h+'" target node does not exist in the given graph.');n=r(n||a).fromMinimalEntry;var d,f,p,l,g,y,m,w,v,b,_,x={},E={},k=new o(s),A=0;for(w=0,b=e.length;w<b;w++)E[l=e[w]]=0,k.push([0,A++,l]),u&&(u[l]=[l]);for(;k.size;)if(m=(f=k.pop())[0],!((l=f[2])in x)){if(x[l]=m,l===h)break;for(v=0,_=(d=t.outboundEdges(l)).length;v<_;v++)if(y=d[v],g=t.opposite(l,y),p=n(y,t.getEdgeAttributes(y))+x[l],!(c&&p>c)){if(g in x&&p<x[g])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(g in E)||p<E[g])&&(E[g]=p,k.push([p,A++,g]),u&&(u[g]=u[l].concat(g)))}}}(t,[e],n,0,null,c),c},e.brandes=function(t,e,n){e=""+e,n=r(n||a).fromMinimalEntry;var i,s,h,u,d,f,p,l,g,y,m=[],w={},v={},b=t.nodes();for(g=0,y=b.length;g<y;g++)w[f=b[g]]=[],v[f]=0;var _={};v[e]=1;var x={};x[e]=0;var E=0,k=new o(c);for(k.push([0,E++,e,e]);k.size;)if(u=(s=k.pop())[0],h=s[2],!((f=s[3])in _))for(v[f]+=v[h],m.push(f),_[f]=u,g=0,y=(i=t.outboundEdges(f)).length;g<y;g++)l=i[g],p=t.opposite(f,l),d=u+n(l,t.getEdgeAttributes(l)),p in _||p in x&&!(d<x[p])?d===x[p]&&(v[p]+=v[f],w[p].push(f)):(x[p]=d,k.push([d,E++,f,p]),v[p]=0,w[p]=[f]);return[m,w,v]}},2816:(t,e,n)=>{var i=n(3171),r=n(1529);e.dijkstra=n(6416),i.bidirectional,i.singleSource,i.singleSourceLength,i.undirectedSingleSourceLength,i.brandes,r.edgePathFromNodePath},3171:(t,e,n)=>{var i=n(6186),r=n(6937),o=n(3796);function a(t,e,n){if(!i(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,a={},s=0;a[n]=0;for(var c,h,u,d=[n];0!==d.length;){var f=[];for(c=0,h=d.length;c<h;c++)u=d[c],r.has(u)||(r.add(u),o(f,e[t](u)),a[u]=s);s++,d=f}return a}var s=a.bind(null,"outboundNeighbors"),c=a.bind(null,"neighbors");e.bidirectional=function(t,e,n){if(!i(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if((e=""+e)===(n=""+n))return[e];var r=t.inboundNeighbors.bind(t),o=t.outboundNeighbors.bind(t),a={},s={};a[e]=null,s[n]=null;var c,h,u,d,f,p,l,g,y=[e],m=[n],w=!1;t:for(;y.length&&m.length;)if(y.length<=m.length){for(c=y,y=[],f=0,l=c.length;f<l;f++)for(p=0,g=(u=o(h=c[f])).length;p<g;p++)if((d=u[p])in a||(y.push(d),a[d]=h),d in s){w=!0;break t}}else for(c=m,m=[],f=0,l=c.length;f<l;f++)for(p=0,g=(u=r(h=c[f])).length;p<g;p++)if((d=u[p])in s||(m.push(d),s[d]=h),d in a){w=!0;break t}if(!w)return null;for(var v=[];d;)v.unshift(d),d=a[d];for(d=s[v[v.length-1]];d;)v.push(d),d=s[d];return v.length?v:null},e.singleSource=function(t,e){if(!i(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');var n,r,o,a,s,c,h={},u={};for(h[e=""+e]=!0,u[e]=[e];Object.keys(h).length;)for(o in n=h,h={},n)for(s=0,c=(r=t.outboundNeighbors(o)).length;s<c;s++)u[a=r[s]]||(u[a]=u[o].concat(a),h[a]=!0);return u},e.singleSourceLength=s,e.undirectedSingleSourceLength=c,e.brandes=function(t,e){e=""+e;var n,i,o,a,s,c,h,u,d,f=[],p={},l={},g=t.nodes();for(c=0,u=g.length;c<u;c++)p[a=g[c]]=[],l[a]=0;var y={};l[e]=1,y[e]=0;for(var m=r.of(e);m.size;)for(a=m.dequeue(),f.push(a),n=y[a],i=l[a],h=0,d=(o=t.outboundNeighbors(a)).length;h<d;h++)(s=o[h])in y||(m.enqueue(s),y[s]=n+1),y[s]===n+1&&(l[s]+=i,p[s].push(a));return[f,p,l]}},1529:(t,e)=>{var n=function(){return!0};e.edgePathFromNodePath=function(t,e){var i,r,o,a,s=e.length;if(s<2)return r=e[0],(a=t.multi?t.findEdge(r,r,n):t.edge(r,r))?[a]:[];s--;var c=new Array(s);for(i=0;i<s;i++){if(r=e[i],o=e[i+1],void 0===(a=t.multi?t.findOutboundEdge(r,o,n):t.edge(r,o)))throw new Error("graphology-shortest-path: given path is impossible in given graph.");c[i]=a}return c}},3181:(t,e,n)=>{var i=n(6186),r=n(2012),o=n(5480),a=o.TraversalRecord,s=o.capitalize;function c(t,e,n,o){if(o=o||{},!i(t))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if("function"!=typeof n)throw new Error("graphology-traversal/bfs: given callback is not a function.");if(0!==t.order){var c,h=new r(t),u=t["forEach"+s(o.mode||"outbound")+"Neighbor"].bind(t);(null===e?h.forEachNodeYetUnseen.bind(h):function(n){n(e=""+e,t.getNodeAttributes(e))})((function(t,e){for(h.pushWith(t,new a(t,e,0));0!==h.size;)c=h.shift(),!0!==n(c.node,c.attributes,c.depth)&&u(c.node,d)}))}function d(t,e){h.pushWith(t,new a(t,e,c.depth+1))}}e.bfs=function(t,e,n){return c(t,null,e,n)},e.bfsFromNode=c},4680:(t,e,n)=>{var i=n(6186),r=n(1341),o=n(5480),a=o.TraversalRecord,s=o.capitalize;function c(t,e,n,o){if(o=o||{},!i(t))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if("function"!=typeof n)throw new Error("graphology-traversal/dfs: given callback is not a function.");if(0!==t.order){var c,h=new r(t),u=t["forEach"+s(o.mode||"outbound")+"Neighbor"].bind(t);(null===e?h.forEachNodeYetUnseen.bind(h):function(n){n(e=""+e,t.getNodeAttributes(e))})((function(t,e){for(h.pushWith(t,new a(t,e,0));0!==h.size;)c=h.pop(),!0!==n(c.node,c.attributes,c.depth)&&u(c.node,d)}))}function d(t,e){h.pushWith(t,new a(t,e,c.depth+1))}}e.dfs=function(t,e,n){return c(t,null,e,n)},e.dfsFromNode=c},7918:(t,e,n)=>{var i=n(3181),r=n(4680);i.bfs,e.ah=i.bfsFromNode,r.dfs,r.dfsFromNode},5480:(t,e)=>{e.TraversalRecord=function(t,e,n){this.node=t,this.attributes=e,this.depth=n},e.capitalize=function(t){return t[0].toUpperCase()+t.slice(1)}},2308:(t,e)=>{function n(t){return"number"!=typeof t||isNaN(t)?1:t}function i(t,e){var n={},i=function(t){return void 0===t?e:t};"function"==typeof e&&(i=e);var r=function(e){return i(e[t])},o=function(){return i(void 0)};return"string"==typeof t?(n.fromAttributes=r,n.fromGraph=function(t,e){return r(t.getEdgeAttributes(e))},n.fromEntry=function(t,e){return r(e)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):"function"==typeof t?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(e,n){var r=e.extremities(n);return i(t(n,e.getEdgeAttributes(n),r[0],r[1],e.getNodeAttributes(r[0]),e.getNodeAttributes(r[1]),e.isUndirected(n)))},n.fromEntry=function(e,n,r,o,a,s,c){return i(t(e,n,r,o,a,s,c))},n.fromPartialEntry=function(e,n,r,o){return i(t(e,n,r,o))},n.fromMinimalEntry=function(e,n){return i(t(e,n))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}e.Q6=function(t){return i(t,n)}},6186:t=>{t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},2698:function(t){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return o=r()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},o.apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return o(t,arguments,n(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i(a,t)},a(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=function(){for(var t=arguments[0],e=1,n=arguments.length;e<n;e++)if(arguments[e])for(var i in arguments[e])t[i]=arguments[e][i];return t};function h(t,e,n,i){var r=t._nodes.get(e),o=null;return r?o="mixed"===i?r.out&&r.out[n]||r.undirected&&r.undirected[n]:"directed"===i?r.out&&r.out[n]:r.undirected&&r.undirected[n]:o}function u(e){return"object"===t(e)&&null!==e}function d(t){var e;for(e in t)return!1;return!0}function f(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function p(t,e,n){var i={enumerable:!0,configurable:!0};"function"==typeof n?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function l(t){return!(!u(t)||t.attributes&&!Array.isArray(t.attributes))}"function"==typeof Object.assign&&(c=Object.assign);var g,y={exports:{}},m="object"==typeof Reflect?Reflect:null,w=m&&"function"==typeof m.apply?m.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};g=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var v=Number.isNaN||function(t){return t!=t};function b(){b.init.call(this)}y.exports=b,y.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,o),i(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}M(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&M(t,"error",e,n)}(t,r,{once:!0})}))},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var _=10;function x(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function E(t){return void 0===t._maxListeners?b.defaultMaxListeners:t._maxListeners}function k(t,e,n,i){var r,o,a,s;if(x(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=E(t))>0&&a.length>r&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=A.bind(i);return r.listener=n,i.wrapFn=r,r}function S(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):N(r,r.length)}function L(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function N(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function M(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}function O(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(t){if("number"!=typeof t||t<0||v(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_=t}}),b.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||v(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},b.prototype.getMaxListeners=function(){return E(this)},b.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=r[t];if(void 0===s)return!1;if("function"==typeof s)w(s,this,e);else{var c=s.length,h=N(s,c);for(n=0;n<c;++n)w(h[n],this,e)}return!0},b.prototype.addListener=function(t,e){return k(this,t,e,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(t,e){return k(this,t,e,!0)},b.prototype.once=function(t,e){return x(e),this.on(t,G(this,t,e)),this},b.prototype.prependOnceListener=function(t,e){return x(e),this.prependListener(t,G(this,t,e)),this},b.prototype.removeListener=function(t,e){var n,i,r,o,a;if(x(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},b.prototype.listeners=function(t){return S(this,t,!0)},b.prototype.rawListeners=function(t){return S(this,t,!1)},b.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):L.call(t,e)},b.prototype.listenerCount=L,b.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=function(){return this}),O.of=function(){var t=arguments,e=t.length,n=0;return new O((function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}}))},O.empty=function(){return new O((function(){return{done:!0}}))},O.fromSequence=function(t){var e=0,n=t.length;return new O((function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}}))},O.is=function(t){return t instanceof O||"object"==typeof t&&null!==t&&"function"==typeof t.next};var D=O,z={};z.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,z.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var U=D,j=z,C=j.ARRAY_BUFFER_SUPPORT,T=j.SYMBOL_SUPPORT,R=function(t){var e=function(t){return"string"==typeof t||Array.isArray(t)||C&&ArrayBuffer.isView(t)?U.fromSequence(t):"object"!=typeof t||null===t?null:T&&"function"==typeof t[Symbol.iterator]?t[Symbol.iterator]():"function"==typeof t.next?t:null}(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},P=R,B=function(t,e){for(var n,i=arguments.length>1?e:1/0,r=i!==1/0?new Array(i):[],o=0,a=P(t);;){if(o===i)return r;if((n=a.next()).done)return o!==e&&(r.length=o),r;r[o++]=n.value}},I=function(t){function n(e){var n;return(n=t.call(this)||this).name="GraphError",n.message=e,n}return e(n,t),n}(a(Error)),F=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(I),W=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(I),q=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(I);function Z(t,e){this.key=t,this.attributes=e,this.clear()}function $(t,e){this.key=t,this.attributes=e,this.clear()}function K(t,e){this.key=t,this.attributes=e,this.clear()}function H(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}function Y(t,e,n,i,r,o,a){var s,c,h,u;if(i=""+i,0===n){if(!(s=t._nodes.get(i)))throw new W("Graph.".concat(e,': could not find the "').concat(i,'" node in the graph.'));h=r,u=o}else if(3===n){if(r=""+r,!(c=t._edges.get(r)))throw new W("Graph.".concat(e,': could not find the "').concat(r,'" edge in the graph.'));var d=c.source.key,f=c.target.key;if(i===d)s=c.target;else{if(i!==f)throw new W("Graph.".concat(e,': the "').concat(i,'" node is not attached to the "').concat(r,'" edge (').concat(d,", ").concat(f,")."));s=c.source}h=o,u=a}else{if(!(c=t._edges.get(i)))throw new W("Graph.".concat(e,': could not find the "').concat(i,'" edge in the graph.'));s=1===n?c.source:c.target,h=r,u=o}return[s,h,u]}Z.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},K.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},H.prototype.attach=function(){var t="out",e="in";this.undirected&&(t=e="undirected");var n=this.source.key,i=this.target.key;this.source[t][i]=this,this.undirected&&n===i||(this.target[e][n]=this)},H.prototype.attachMulti=function(){var t="out",e="in",n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");var r=this.source[t],o=r[i];if(void 0===o)return r[i]=this,void(this.undirected&&n===i||(this.target[e][n]=this));o.previous=this,this.next=o,r[i]=this,this.target[e][n]=this},H.prototype.detach=function(){var t=this.source.key,e=this.target.key,n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]},H.prototype.detachMulti=function(){var t=this.source.key,e=this.target.key,n="out",i="in";this.undirected&&(n=i="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var J=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];return a.attributes[s]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){return Y(this,e,n,t,i)[0].attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];return a.attributes.hasOwnProperty(s)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r,o){var a=Y(this,e,n,t,i,r,o),s=a[0],c=a[1],h=a[2];return s.attributes[c]=h,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:c}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r,o){var a=Y(this,e,n,t,i,r,o),s=a[0],c=a[1],h=a[2];if("function"!=typeof h)throw new F("Graph.".concat(e,": updater should be a function."));var u=s.attributes,d=h(u[c]);return u[c]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:c}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];if(!u(s))throw new F("Graph.".concat(e,": provided attributes are not a plain object."));return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];if(!u(s))throw new F("Graph.".concat(e,": provided attributes are not a plain object."));return c(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=Y(this,e,n,t,i,r),a=o[0],s=o[1];if("function"!=typeof s)throw new F("Graph.".concat(e,": provided updater is not a function."));return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}}],V=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return r.attributes[i]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var r=""+t,o=""+arguments[1];if(!(i=h(this,r,o,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(r,'" - "').concat(o,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return i.attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return r.attributes.hasOwnProperty(i)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,s=""+i;if(i=arguments[2],r=arguments[3],!(o=h(this,a,s,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return o.attributes[i]=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,s=""+i;if(i=arguments[2],r=arguments[3],!(o=h(this,a,s,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof r)throw new F("Graph.".concat(e,": updater should be a function."));return o.attributes[i]=r(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return delete r.attributes[i],this.emit("edgeAttributesUpdated",{key:r.key,type:"remove",attributes:r.attributes,name:i}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!u(i))throw new F("Graph.".concat(e,": provided attributes are not a plain object."));return r.attributes=i,this.emit("edgeAttributesUpdated",{key:r.key,type:"replace",attributes:r.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!u(i))throw new F("Graph.".concat(e,": provided attributes are not a plain object."));return c(r.attributes,i),this.emit("edgeAttributesUpdated",{key:r.key,type:"merge",attributes:r.attributes,data:i}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new q("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new q("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=h(this,o,a,n)))throw new W("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new q("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new W("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof i)throw new F("Graph.".concat(e,": provided updater is not a function."));return r.attributes=i(r.attributes),this.emit("edgeAttributesUpdated",{key:r.key,type:"update",attributes:r.attributes}),this}}}],Q=D,X=R,tt=function(){var t=arguments,e=null,n=-1;return new Q((function(){for(var i=null;;){if(null===e){if(++n>=t.length)return{done:!0};e=X(t[n])}if(!0!==(i=e.next()).done)break;e=null}return i}))},et=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function nt(t,e,n,i){var r=!1;for(var o in e)if(o!==i){var a=e[o];if(r=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&r)return a.key}}function it(t,e,n,i){var r,o,a,s=!1;for(var c in e)if(c!==i){r=e[c];do{if(o=r.source,a=r.target,s=n(r.key,r.attributes,o.key,a.key,o.attributes,a.attributes,r.undirected),t&&s)return r.key;r=r.next}while(void 0!==r)}}function rt(t,e){var n,i=Object.keys(t),r=i.length,o=0;return new D((function(){do{if(n)n=n.next;else{if(o>=r)return{done:!0};var a=i[o++];if(a===e){n=void 0;continue}n=t[a]}}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}))}function ot(t,e,n,i){var r=e[n];if(r){var o=r.source,a=r.target;return i(r.key,r.attributes,o.key,a.key,o.attributes,a.attributes,r.undirected)&&t?r.key:void 0}}function at(t,e,n,i){var r=e[n];if(r){var o=!1;do{if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&o)return r.key;r=r.next}while(void 0!==r)}}function st(t,e){var n=t[e];return void 0!==n.next?new D((function(){if(!n)return{done:!0};var t={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:t}})):D.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function ct(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):B(t._edges.keys(),t._edges.size);for(var n,i,r="undirected"===e?t.undirectedSize:t.directedSize,o=new Array(r),a="undirected"===e,s=t._edges.values(),c=0;!0!==(n=s.next()).done;)(i=n.value).undirected===a&&(o[c++]=i.key);return o}function ht(t,e,n,i){if(0!==e.size)for(var r,o,a="mixed"!==n&&n!==e.type,s="undirected"===n,c=!1,h=e._edges.values();!0!==(r=h.next()).done;)if(o=r.value,!a||o.undirected===s){var u=o,d=u.key,f=u.attributes,p=u.source,l=u.target;if(c=i(d,f,p.key,l.key,p.attributes,l.attributes,o.undirected),t&&c)return d}}function ut(t,e){if(0===t.size)return D.empty();var n="mixed"!==e&&e!==t.type,i="undirected"===e,r=t._edges.values();return new D((function(){for(var t,e;;){if((t=r.next()).done)return t;if(e=t.value,!n||e.undirected===i)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}}))}function dt(t,e,n,i,r,o){var a,s=e?it:nt;if("undirected"!==n){if("out"!==i&&(a=s(t,r.in,o),t&&a))return a;if("in"!==i&&(a=s(t,r.out,o,i?void 0:r.key),t&&a))return a}if("directed"!==n&&(a=s(t,r.undirected,o),t&&a))return a}function ft(t,e,n,i){var r=[];return dt(!1,t,e,n,i,(function(t){r.push(t)})),r}function pt(t,e,n){var i=D.empty();return"undirected"!==t&&("out"!==e&&void 0!==n.in&&(i=tt(i,rt(n.in))),"in"!==e&&void 0!==n.out&&(i=tt(i,rt(n.out,e?void 0:n.key)))),"directed"!==t&&void 0!==n.undirected&&(i=tt(i,rt(n.undirected))),i}function lt(t,e,n,i,r,o,a){var s,c=n?at:ot;if("undirected"!==e){if(void 0!==r.in&&"out"!==i&&(s=c(t,r.in,o,a),t&&s))return s;if(void 0!==r.out&&"in"!==i&&(i||r.key!==o)&&(s=c(t,r.out,o,a),t&&s))return s}if("directed"!==e&&void 0!==r.undirected&&(s=c(t,r.undirected,o,a),t&&s))return s}function gt(t,e,n,i,r){var o=[];return lt(!1,t,e,n,i,r,(function(t){o.push(t)})),o}function yt(t,e,n,i){var r=D.empty();return"undirected"!==t&&(void 0!==n.in&&"out"!==e&&i in n.in&&(r=tt(r,st(n.in,i))),void 0!==n.out&&"in"!==e&&i in n.out&&(e||n.key!==i)&&(r=tt(r,st(n.out,i)))),"directed"!==t&&void 0!==n.undirected&&i in n.undirected&&(r=tt(r,st(n.undirected,i))),r}var mt=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function wt(){this.A=null,this.B=null}function vt(t,e,n,i,r){for(var o in i){var a=i[o],s=a.source,c=a.target,h=s===n?c:s;if(!e||!e.has(h.key)){var u=r(h.key,h.attributes);if(t&&u)return h.key}}}function bt(t,e,n,i,r){if("mixed"!==e){if("undirected"===e)return vt(t,null,i,i.undirected,r);if("string"==typeof n)return vt(t,null,i,i[n],r)}var o,a=new wt;if("undirected"!==e){if("out"!==n){if(o=vt(t,null,i,i.in,r),t&&o)return o;a.wrap(i.in)}if("in"!==n){if(o=vt(t,a,i,i.out,r),t&&o)return o;a.wrap(i.out)}}if("directed"!==e&&(o=vt(t,a,i,i.undirected,r),t&&o))return o}function _t(t,e,n){var i=Object.keys(n),r=i.length,o=0;return new D((function(){var a=null;do{if(o>=r)return t&&t.wrap(n),{done:!0};var s=n[i[o++]],c=s.source,h=s.target;a=c===e?h:c,t&&t.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function xt(t,e){var n=e.name,i=e.type,r=e.direction;t.prototype[n]=function(t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new W("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}var i=[];return bt(!1,t,e,n,(function(t){i.push(t)})),i}("mixed"===i?this.type:i,r,e)}}function Et(t,e){var n=e.name,i=e.type,r=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return D.empty();t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new W("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return _t(null,n,n.undirected);if("string"==typeof e)return _t(null,n,n[e])}var i=D.empty(),r=new wt;return"undirected"!==t&&("out"!==e&&(i=tt(i,_t(r,n,n.in))),"in"!==e&&(i=tt(i,_t(r,n,n.out)))),"directed"!==t&&(i=tt(i,_t(r,n,n.undirected))),i}("mixed"===i?this.type:i,r,e)}}function kt(t,e,n,i,r){for(var o,a,s,c,h,u,d,f=i._nodes.values(),p=i.type;!0!==(o=f.next()).done;){var l=!1;if(a=o.value,"undirected"!==p)for(s in c=a.out){h=c[s];do{if(u=h.target,l=!0,d=r(a.key,u.key,a.attributes,u.attributes,h.key,h.attributes,h.undirected),t&&d)return h;h=h.next}while(h)}if("directed"!==p)for(s in c=a.undirected)if(!(e&&a.key>s)){h=c[s];do{if((u=h.target).key!==s&&(u=h.source),l=!0,d=r(a.key,u.key,a.attributes,u.attributes,h.key,h.attributes,h.undirected),t&&d)return h;h=h.next}while(h)}if(n&&!l&&(d=r(a.key,null,a.attributes,null,null,null,null),t&&d))return null}}function At(t){if(!u(t))throw new F('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new F("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!u(t.attributes)||null===t.attributes))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Gt(t){if(!u(t))throw new F('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new F("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new F("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!u(t.attributes)||null===t.attributes))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&"boolean"!=typeof t.undirected)throw new F("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}wt.prototype.wrap=function(t){null===this.A?this.A=t:null===this.B&&(this.B=t)},wt.prototype.has=function(t){return null!==this.A&&t in this.A||null!==this.B&&t in this.B};var St,Lt=(St=255&Math.floor(256*Math.random()),function(){return St++}),Nt=new Set(["directed","undirected","mixed"]),Mt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ot={allowSelfLoops:!0,multi:!1,type:"mixed"};function Dt(t,e,n){var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function zt(t,e,n,i,r,o,a,s){if(!i&&"undirected"===t.type)throw new q("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new q("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!u(s))throw new F("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(o=""+o,a=""+a,s=s||{},!t.allowSelfLoops&&o===a)throw new q("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var c=t._nodes.get(o),h=t._nodes.get(a);if(!c)throw new W("Graph.".concat(e,': source node "').concat(o,'" not found.'));if(!h)throw new W("Graph.".concat(e,': target node "').concat(a,'" not found.'));var d={key:null,undirected:i,source:o,target:a,attributes:s};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new q("Graph.".concat(e,': the "').concat(r,'" edge already exists in the graph.'));if(!t.multi&&(i?void 0!==c.undirected[a]:void 0!==c.out[a]))throw new q("Graph.".concat(e,': an edge linking "').concat(o,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var f=new H(i,r,c,h,s);t._edges.set(r,f);var p=o===a;return i?(c.undirectedDegree++,h.undirectedDegree++,p&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,h.inDegree++,p&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,d.key=r,t.emit("edgeAdded",d),r}function Ut(t,e,n,i,r,o,a,s,h){if(!i&&"undirected"===t.type)throw new q("Graph.".concat(e,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new q("Graph.".concat(e,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(s)if(h){if("function"!=typeof s)throw new F("Graph.".concat(e,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!u(s))throw new F("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));var d;if(o=""+o,a=""+a,h&&(d=s,s=void 0),!t.allowSelfLoops&&o===a)throw new q("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var f,p,l=t._nodes.get(o),g=t._nodes.get(a);if(!n&&(f=t._edges.get(r))){if(!(f.source.key===o&&f.target.key===a||i&&f.source.key===a&&f.target.key===o))throw new q("Graph.".concat(e,': inconsistency detected when attempting to merge the "').concat(r,'" edge with "').concat(o,'" source & "').concat(a,'" target vs. ("').concat(f.source.key,'", "').concat(f.target.key,'").'));p=f}if(p||t.multi||!l||(p=i?l.undirected[a]:l.out[a]),p){var y=[p.key,!1,!1,!1];if(h?!d:!s)return y;if(h){var m=p.attributes;p.attributes=d(m),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else c(p.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:s});return y}s=s||{},h&&d&&(s=d(s));var w={key:null,undirected:i,source:o,target:a,attributes:s};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new q("Graph.".concat(e,': the "').concat(r,'" edge already exists in the graph.'));var v=!1,b=!1;l||(l=Dt(t,o,{}),v=!0,o===a&&(g=l,b=!0)),g||(g=Dt(t,a,{}),b=!0),f=new H(i,r,l,g,s),t._edges.set(r,f);var _=o===a;return i?(l.undirectedDegree++,g.undirectedDegree++,_&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,g.inDegree++,_&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,w.key=r,t.emit("edgeAdded",w),[r,!0,v,b]}function jt(t,e){t._edges.delete(e.key);var n=e.source,i=e.target,r=e.attributes,o=e.undirected,a=n===i;o?(n.undirectedDegree--,i.undirectedDegree--,a&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,a&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:o})}var Ct=function(n){function i(t){var e;if(e=n.call(this)||this,"boolean"!=typeof(t=c({},Ot,t)).multi)throw new F("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!Nt.has(t.type))throw new F('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new F("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var i="mixed"===t.type?Z:"directed"===t.type?$:K;f(s(e),"NodeDataClass",i);var r="geid_"+Lt()+"_",o=0;return f(s(e),"_attributes",{}),f(s(e),"_nodes",new Map),f(s(e),"_edges",new Map),f(s(e),"_directedSize",0),f(s(e),"_undirectedSize",0),f(s(e),"_directedSelfLoopCount",0),f(s(e),"_undirectedSelfLoopCount",0),f(s(e),"_edgeKeyGenerator",(function(){var t;do{t=r+o++}while(e._edges.has(t));return t})),f(s(e),"_options",t),Mt.forEach((function(t){return f(s(e),t,e[t])})),p(s(e),"order",(function(){return e._nodes.size})),p(s(e),"size",(function(){return e._edges.size})),p(s(e),"directedSize",(function(){return e._directedSize})),p(s(e),"undirectedSize",(function(){return e._undirectedSize})),p(s(e),"selfLoopCount",(function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount})),p(s(e),"directedSelfLoopCount",(function(){return e._directedSelfLoopCount})),p(s(e),"undirectedSelfLoopCount",(function(){return e._undirectedSelfLoopCount})),p(s(e),"multi",e._options.multi),p(s(e),"type",e._options.type),p(s(e),"allowSelfLoops",e._options.allowSelfLoops),p(s(e),"implementation",(function(){return"graphology"})),e}e(i,n);var r=i.prototype;return r._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},r.hasNode=function(t){return this._nodes.has(""+t)},r.hasDirectedEdge=function(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+t,i=this._edges.get(n);return!!i&&!i.undirected}if(2===arguments.length){t=""+t,e=""+e;var r=this._nodes.get(t);return!!r&&r.out.hasOwnProperty(e)}throw new F("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasUndirectedEdge=function(t,e){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+t,i=this._edges.get(n);return!!i&&i.undirected}if(2===arguments.length){t=""+t,e=""+e;var r=this._nodes.get(t);return!!r&&r.undirected.hasOwnProperty(e)}throw new F("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasEdge=function(t,e){if(1===arguments.length){var n=""+t;return this._edges.has(n)}if(2===arguments.length){t=""+t,e=""+e;var i=this._nodes.get(t);return!!i&&(void 0!==i.out&&i.out.hasOwnProperty(e)||void 0!==i.undirected&&i.undirected.hasOwnProperty(e))}throw new F("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.directedEdge=function(t,e){if("undirected"!==this.type){if(t=""+t,e=""+e,this.multi)throw new q("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(t);if(!n)throw new W('Graph.directedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.directedEdge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.out&&n.out[e]||void 0;return i?i.key:void 0}},r.undirectedEdge=function(t,e){if("directed"!==this.type){if(t=""+t,e=""+e,this.multi)throw new q("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(t);if(!n)throw new W('Graph.undirectedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.undirectedEdge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.undirected&&n.undirected[e]||void 0;return i?i.key:void 0}},r.edge=function(t,e){if(this.multi)throw new q("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.edge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W('Graph.edge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(i)return i.key},r.areDirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areDirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)},r.areOutNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areOutNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out},r.areInNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areInNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in},r.areUndirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areUndirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"directed"!==this.type&&e in n.undirected},r.areNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)||"directed"!==this.type&&e in n.undirected},r.areInboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areInboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in||"directed"!==this.type&&e in n.undirected},r.areOutboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new W('Graph.areOutboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out||"directed"!==this.type&&e in n.undirected},r.inDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree},r.outDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree},r.directedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.directedDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree},r.undirectedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.undirectedDegree: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree},r.inboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree),n},r.outboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.outDegree),n},r.degree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.degree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree),n},r.inDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree-e.directedLoops},r.outDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree-e.directedLoops},r.directedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree-2*e.directedLoops},r.undirectedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree-2*e.undirectedLoops},r.inboundDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree,i+=e.directedLoops),n-i},r.outboundDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.outDegree,i+=e.directedLoops),n-i},r.degreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new W('Graph.degreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree,i+=2*e.directedLoops),n-i},r.source=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.source: could not find the "'.concat(t,'" edge in the graph.'));return e.source.key},r.target=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.target: could not find the "'.concat(t,'" edge in the graph.'));return e.target.key},r.extremities=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.extremities: could not find the "'.concat(t,'" edge in the graph.'));return[e.source.key,e.target.key]},r.opposite=function(t,e){t=""+t,e=""+e;var n=this._edges.get(e);if(!n)throw new W('Graph.opposite: could not find the "'.concat(e,'" edge in the graph.'));var i=n.source.key,r=n.target.key;if(t===i)return r;if(t===r)return i;throw new W('Graph.opposite: the "'.concat(t,'" node is not attached to the "').concat(e,'" edge (').concat(i,", ").concat(r,")."))},r.hasExtremity=function(t,e){t=""+t,e=""+e;var n=this._edges.get(t);if(!n)throw new W('Graph.hasExtremity: could not find the "'.concat(t,'" edge in the graph.'));return n.source.key===e||n.target.key===e},r.isUndirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isUndirected: could not find the "'.concat(t,'" edge in the graph.'));return e.undirected},r.isDirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isDirected: could not find the "'.concat(t,'" edge in the graph.'));return!e.undirected},r.isSelfLoop=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new W('Graph.isSelfLoop: could not find the "'.concat(t,'" edge in the graph.'));return e.source===e.target},r.addNode=function(t,e){var n=function(t,e,n){if(n&&!u(n))throw new F('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(e=""+e,n=n||{},t._nodes.has(e))throw new q('Graph.addNode: the "'.concat(e,'" node already exist in the graph.'));var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}(this,t,e);return n.key},r.mergeNode=function(t,e){if(e&&!u(e))throw new F('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(e,'"'));t=""+t,e=e||{};var n=this._nodes.get(t);return n?(e&&(c(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])},r.updateNode=function(t,e){if(e&&"function"!=typeof e)throw new F('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(e,'"'));t=""+t;var n=this._nodes.get(t);if(n){if(e){var i=n.attributes;n.attributes=e(i),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}var r=e?e({}):{};return n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]},r.dropNode=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new W('Graph.dropNode: could not find the "'.concat(t,'" node in the graph.'));if("undirected"!==this.type){for(var i in n.out){e=n.out[i];do{jt(this,e),e=e.next}while(e)}for(var r in n.in){e=n.in[r];do{jt(this,e),e=e.next}while(e)}}if("directed"!==this.type)for(var o in n.undirected){e=n.undirected[o];do{jt(this,e),e=e.next}while(e)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})},r.dropEdge=function(t){var e;if(arguments.length>1){var n=""+arguments[0],i=""+arguments[1];if(!(e=h(this,n,i,this.type)))throw new W('Graph.dropEdge: could not find the "'.concat(n,'" -> "').concat(i,'" edge in the graph.'))}else if(t=""+t,!(e=this._edges.get(t)))throw new W('Graph.dropEdge: could not find the "'.concat(t,'" edge in the graph.'));return jt(this,e),this},r.dropDirectedEdge=function(t,e){if(arguments.length<2)throw new q("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new q("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=h(this,t=""+t,e=""+e,"directed");if(!n)throw new W('Graph.dropDirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return jt(this,n),this},r.dropUndirectedEdge=function(t,e){if(arguments.length<2)throw new q("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new q("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=h(this,t,e,"undirected");if(!n)throw new W('Graph.dropUndirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return jt(this,n),this},r.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},r.clearEdges=function(){for(var t,e=this._nodes.values();!0!==(t=e.next()).done;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},r.getAttribute=function(t){return this._attributes[t]},r.getAttributes=function(){return this._attributes},r.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},r.setAttribute=function(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},r.updateAttribute=function(t,e){if("function"!=typeof e)throw new F("Graph.updateAttribute: updater should be a function.");var n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},r.removeAttribute=function(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this},r.replaceAttributes=function(t){if(!u(t))throw new F("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},r.mergeAttributes=function(t){if(!u(t))throw new F("Graph.mergeAttributes: provided attributes are not a plain object.");return c(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this},r.updateAttributes=function(t){if("function"!=typeof t)throw new F("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},r.updateEachNodeAttributes=function(t,e){if("function"!=typeof t)throw new F("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!l(e))throw new F("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i,r=this._nodes.values();!0!==(n=r.next()).done;)(i=n.value).attributes=t(i.key,i.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})},r.updateEachEdgeAttributes=function(t,e){if("function"!=typeof t)throw new F("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!l(e))throw new F("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i,r,o,a=this._edges.values();!0!==(n=a.next()).done;)r=(i=n.value).source,o=i.target,i.attributes=t(i.key,i.attributes,r.key,o.key,r.attributes,o.attributes,i.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})},r.forEachAdjacencyEntry=function(t){if("function"!=typeof t)throw new F("Graph.forEachAdjacencyEntry: expecting a callback.");kt(!1,!1,!1,this,t)},r.forEachAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new F("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");kt(!1,!1,!0,this,t)},r.forEachAssymetricAdjacencyEntry=function(t){if("function"!=typeof t)throw new F("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");kt(!1,!0,!1,this,t)},r.forEachAssymetricAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new F("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");kt(!1,!0,!0,this,t)},r.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):B(this._nodes.keys(),this._nodes.size)},r.forEachNode=function(t){if("function"!=typeof t)throw new F("Graph.forEachNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)t((n=e.value).key,n.attributes)},r.findNode=function(t){if("function"!=typeof t)throw new F("Graph.findNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(t((n=e.value).key,n.attributes))return n.key},r.mapNodes=function(t){if("function"!=typeof t)throw new F("Graph.mapNode: expecting a callback.");for(var e,n,i=this._nodes.values(),r=new Array(this.order),o=0;!0!==(e=i.next()).done;)n=e.value,r[o++]=t(n.key,n.attributes);return r},r.someNode=function(t){if("function"!=typeof t)throw new F("Graph.someNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(t((n=e.value).key,n.attributes))return!0;return!1},r.everyNode=function(t){if("function"!=typeof t)throw new F("Graph.everyNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(!t((n=e.value).key,n.attributes))return!1;return!0},r.filterNodes=function(t){if("function"!=typeof t)throw new F("Graph.filterNodes: expecting a callback.");for(var e,n,i=this._nodes.values(),r=[];!0!==(e=i.next()).done;)t((n=e.value).key,n.attributes)&&r.push(n.key);return r},r.reduceNodes=function(t,e){if("function"!=typeof t)throw new F("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new F("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var n,i,r=e,o=this._nodes.values();!0!==(n=o.next()).done;)r=t(r,(i=n.value).key,i.attributes);return r},r.nodeEntries=function(){var t=this._nodes.values();return new D((function(){var e=t.next();if(e.done)return e;var n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}))},r.export=function(){var t=this,e=new Array(this._nodes.size),n=0;this._nodes.forEach((function(t,i){e[n++]=function(t,e){var n={key:t};return d(e.attributes)||(n.attributes=c({},e.attributes)),n}(i,t)}));var i=new Array(this._edges.size);return n=0,this._edges.forEach((function(e,r){i[n++]=function(t,e,n){var i={key:e,source:n.source.key,target:n.target.key};return d(n.attributes)||(i.attributes=c({},n.attributes)),"mixed"===t&&n.undirected&&(i.undirected=!0),i}(t.type,r,e)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}},r.import=function(t){var e,n,r,o,a,s=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof i)return t.forEachNode((function(t,e){c?s.mergeNode(t,e):s.addNode(t,e)})),t.forEachEdge((function(t,e,n,i,r,o,a){c?a?s.mergeUndirectedEdgeWithKey(t,n,i,e):s.mergeDirectedEdgeWithKey(t,n,i,e):a?s.addUndirectedEdgeWithKey(t,n,i,e):s.addDirectedEdgeWithKey(t,n,i,e)})),this;if(!u(t))throw new F("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!u(t.attributes))throw new F("Graph.import: invalid attributes. Expecting a plain object.");c?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(r=t.nodes,!Array.isArray(r))throw new F("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=r.length;e<n;e++){At(o=r[e]);var h=o,d=h.key,f=h.attributes;c?this.mergeNode(d,f):this.addNode(d,f)}}if(t.edges){var p=!1;if("undirected"===this.type&&(p=!0),r=t.edges,!Array.isArray(r))throw new F("Graph.import: invalid edges. Expecting an array.");for(e=0,n=r.length;e<n;e++){Gt(a=r[e]);var l=a,g=l.source,y=l.target,m=l.attributes,w=l.undirected,v=void 0===w?p:w;"key"in a?(c?v?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:v?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,a.key,g,y,m):(c?v?this.mergeUndirectedEdge:this.mergeDirectedEdge:v?this.addUndirectedEdge:this.addDirectedEdge).call(this,g,y,m)}}return this},r.nullCopy=function(t){var e=new i(c({},this._options,t));return e.replaceAttributes(c({},this.getAttributes())),e},r.emptyCopy=function(t){var e=this.nullCopy(t);return this._nodes.forEach((function(t,n){var i=c({},t.attributes);t=new e.NodeDataClass(n,i),e._nodes.set(n,t)})),e},r.copy=function(t){if("string"==typeof(t=t||{}).type&&t.type!==this.type&&"mixed"!==t.type)throw new q('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(t.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new q("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new q("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var e,n,i=this.emptyCopy(t),r=this._edges.values();!0!==(e=r.next()).done;)zt(i,"copy",!1,(n=e.value).undirected,n.key,n.source.key,n.target.key,c({},n.attributes));return i},r.toJSON=function(){return this.export()},r.toString=function(){return"[object Graph]"},r.inspect=function(){var e=this,n={};this._nodes.forEach((function(t,e){n[e]=t.attributes}));var i={},r={};this._edges.forEach((function(t,n){var o,a=t.undirected?"--":"->",s="",c=t.source.key,h=t.target.key;t.undirected&&c>h&&(o=c,c=h,h=o);var u="(".concat(c,")").concat(a,"(").concat(h,")");n.startsWith("geid_")?e.multi&&(void 0===r[u]?r[u]=0:r[u]++,s+="".concat(r[u],". ")):s+="[".concat(n,"]: "),i[s+=u]=t.attributes}));var o={};for(var a in this)this.hasOwnProperty(a)&&!Mt.has(a)&&"function"!=typeof this[a]&&"symbol"!==t(a)&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=n,o.edges=i,f(o,"constructor",this.constructor),o},i}(y.exports.EventEmitter);"undefined"!=typeof Symbol&&(Ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ct.prototype.inspect),[{name:function(t){return"".concat(t,"Edge")},generateKey:!0},{name:function(t){return"".concat(t,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(t){return"".concat(t,"EdgeWithKey")}},{name:function(t){return"".concat(t,"DirectedEdgeWithKey")},type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdgeWithKey")},type:"undirected"}].forEach((function(t){["add","merge","update"].forEach((function(e){var n=t.name(e),i="add"===e?zt:Ut;t.generateKey?Ct.prototype[n]=function(r,o,a){return i(this,n,!0,"undirected"===(t.type||this.type),null,r,o,a,"update"===e)}:Ct.prototype[n]=function(r,o,a,s){return i(this,n,!1,"undirected"===(t.type||this.type),r,o,a,s,"update"===e)}}))})),function(t){J.forEach((function(e){var n=e.name,i=e.attacher;i(t,n("Node"),0),i(t,n("Source"),1),i(t,n("Target"),2),i(t,n("Opposite"),3)}))}(Ct),function(t){V.forEach((function(e){var n=e.name,i=e.attacher;i(t,n("Edge"),"mixed"),i(t,n("DirectedEdge"),"directed"),i(t,n("UndirectedEdge"),"undirected")}))}(Ct),function(t){et.forEach((function(e){!function(t,e){var n=e.name,i=e.type,r=e.direction;t.prototype[n]=function(t,e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(!arguments.length)return ct(this,i);if(1===arguments.length){t=""+t;var o=this._nodes.get(t);if(void 0===o)throw new W("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return ft(this.multi,"mixed"===i?this.type:i,r,o)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new W("Graph.".concat(n,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W("Graph.".concat(n,':  could not find the "').concat(e,'" target node in the graph.'));return gt(i,this.multi,r,a,e)}throw new F("Graph.".concat(n,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"===i||"mixed"===this.type||i===this.type){if(1===arguments.length)return ht(!1,this,i,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new W("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return dt(!1,this.multi,"mixed"===i?this.type:i,r,a,n)}if(3===arguments.length){t=""+t,e=""+e;var s=this._nodes.get(t);if(!s)throw new W("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return lt(!1,i,this.multi,r,s,e,n)}throw new F("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){var t,e=Array.prototype.slice.call(arguments),n=e.pop();if(0===e.length){var r=0;"directed"!==i&&(r+=this.undirectedSize),"undirected"!==i&&(r+=this.directedSize),t=new Array(r);var a=0;e.push((function(e,i,r,o,s,c,h){t[a++]=n(e,i,r,o,s,c,h)}))}else t=[],e.push((function(e,i,r,o,a,s,c){t.push(n(e,i,r,o,a,s,c))}));return this[o].apply(this,e),t};var s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n=[];return t.push((function(t,i,r,o,a,s,c){e(t,i,r,o,a,s,c)&&n.push(t)})),this[o].apply(this,t),n};var c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(){var t,e,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new F("Graph.".concat(c,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(n.length,")."));if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new F("Graph.".concat(c,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===n.length?(t=n[0],e=n[1],n=[]):3===n.length?(t=n[1],e=n[2],n=[n[0]]):4===n.length&&(t=n[2],e=n[3],n=[n[0],n[1]]);var i=e;return n.push((function(e,n,r,o,a,s,c){i=t(i,e,n,r,o,a,s,c)})),this[o].apply(this,n),i}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return!1;if(1===arguments.length)return ht(!0,this,i,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new W("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return dt(!0,this.multi,"mixed"===i?this.type:i,r,a,n)}if(3===arguments.length){t=""+t,e=""+e;var s=this._nodes.get(t);if(!s)throw new W("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return lt(!0,i,this.multi,r,s,e,n)}throw new F("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,i,r,o,a,s){return e(t,n,i,r,o,a,s)})),!!this[o].apply(this,t)};var s="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,i,r,o,a,s){return!e(t,n,i,r,o,a,s)})),!this[o].apply(this,t)}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t,e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return D.empty();if(!arguments.length)return ut(this,i);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(!n)throw new W("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return pt(i,r,n)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new W("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new W("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return yt(i,r,a,e)}throw new F("Graph.".concat(o,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e)}))}(Ct),function(t){mt.forEach((function(e){xt(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new W("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));bt(!1,"mixed"===i?this.type:i,r,n,e)}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(t,e){var n=[];return this[o](t,(function(t,i){n.push(e(t,i))})),n};var s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(t,e){var n=[];return this[o](t,(function(t,i){e(t,i)&&n.push(t)})),n};var c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(t,e,n){if(arguments.length<3)throw new F("Graph.".concat(c,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var i=n;return this[o](t,(function(t,n){i=e(i,t,n)})),i}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new W("Graph.".concat(a,': could not find the "').concat(t,'" node in the graph.'));return bt(!0,"mixed"===i?this.type:i,r,n,e)}};var s="some"+o;t.prototype[s]=function(t,e){return!!this[a](t,e)};var c="every"+o;t.prototype[c]=function(t,e){return!this[a](t,(function(t,n){return!e(t,n)}))}}(t,e),Et(t,e)}))}(Ct);var Tt=function(t){function n(e){var n=c({type:"directed"},e);if("multi"in n&&!1!==n.multi)throw new F("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new F('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Ct),Rt=function(t){function n(e){var n=c({type:"undirected"},e);if("multi"in n&&!1!==n.multi)throw new F("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new F('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Ct),Pt=function(t){function n(e){var n=c({multi:!0},e);if("multi"in n&&!0!==n.multi)throw new F("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return t.call(this,n)||this}return e(n,t),n}(Ct),Bt=function(t){function n(e){var n=c({type:"directed",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new F("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new F('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Ct),It=function(t){function n(e){var n=c({type:"undirected",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new F("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new F('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Ct);function Ft(t){t.from=function(e,n){var i=c({},e.options,n),r=new t(i);return r.import(e),r}}return Ft(Ct),Ft(Tt),Ft(Rt),Ft(Pt),Ft(Bt),Ft(It),Ct.Graph=Ct,Ct.DirectedGraph=Tt,Ct.UndirectedGraph=Rt,Ct.MultiGraph=Pt,Ct.MultiDirectedGraph=Bt,Ct.MultiUndirectedGraph=It,Ct.InvalidArgumentsGraphError=F,Ct.NotFoundGraphError=W,Ct.UsageGraphError=q,Ct}()},4530:(t,e)=>{function n(t,e){var n=[],i=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(e)).join(".")+"]"}),function(r,o){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?i.splice(a,1/0,r):i.push(r),~n.indexOf(o)&&(o=e.call(this,r,o))}else n.push(o);return null==t?o:t.call(this,r,o)}}(t.exports=function(t,e,i,r){return JSON.stringify(t,n(e,r),i)}).getSerialize=n},4453:(t,e,n)=>{var i=n(650),r=n(4993);function o(t,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof e||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=t,this.capacity=e,this.items=new t(this.capacity),this.clear()}o.prototype.clear=function(){this.start=0,this.size=0},o.prototype.push=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=(this.start+this.size)%this.capacity;return this.items[e]=t,++this.size},o.prototype.unshift=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return 0===this.start&&(e=this.capacity-1),this.items[e]=t,this.start=e,++this.size},o.prototype.pop=function(){if(0===this.size)return;const t=(this.start+this.size-1)%this.capacity;return this.size--,this.items[t]},o.prototype.shift=function(){if(0!==this.size){var t=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[t]}},o.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},o.prototype.peekLast=function(){if(0!==this.size){var t=this.start+this.size-1;return t>this.capacity&&(t-=this.capacity),this.items[t]}},o.prototype.get=function(t){if(0!==this.size)return(t=this.start+t)>this.capacity&&(t-=this.capacity),this.items[t]},o.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.capacity,i=this.size,r=this.start,o=0;o<i;)t.call(e,this.items[r],o,this),o++,++r===n&&(r=0)},o.prototype.toArray=function(){var t=this.start+this.size;if(t<this.capacity)return this.items.slice(this.start,t);for(var e=new this.ArrayClass(this.size),n=this.capacity,i=this.size,r=this.start,o=0;o<i;)e[o]=this.items[r],o++,++r===n&&(r=0);return e},o.prototype.values=function(){var t=this.items,e=this.capacity,n=this.size,i=this.start,o=0;return new r((function(){if(o>=n)return{done:!0};var r=t[i];return i++,o++,i===e&&(i=0),{value:r,done:!1}}))},o.prototype.entries=function(){var t=this.items,e=this.capacity,n=this.size,i=this.start,o=0;return new r((function(){if(o>=n)return{done:!0};var r=t[i];return++i===e&&(i=0),{value:[o++,r],done:!1}}))},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.inspect=function(){var t=this.toArray();return t.type=this.ArrayClass.name,t.capacity=this.capacity,Object.defineProperty(t,"constructor",{value:o,enumerable:!1}),t},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(t,e,n){if(arguments.length<3&&"number"!=typeof(n=i.guessLength(t)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var r=new o(e,n);if(i.isArrayLike(t)){var a,s;for(a=0,s=t.length;a<s;a++)r.items[a]=t[a];return r.size=s,r}return i.forEach(t,(function(t){r.push(t)})),r},t.exports=o},7972:(t,e,n)=>{var i=n(113),r=n(5499),o=n(650),a=r.DEFAULT_COMPARATOR,s=r.reverseComparator;function c(t,e,n,i){for(var r,o,a=e[i];i>n&&t(a,o=e[r=i-1>>1])<0;)e[i]=o,i=r;e[i]=a}function h(t,e,n){for(var i,r=e.length,o=n,a=e[n],s=2*n+1;s<r;)(i=s+1)<r&&t(e[s],e[i])>=0&&(s=i),e[n]=e[s],s=2*(n=s)+1;e[n]=a,c(t,e,o,n)}function u(t,e,n){e.push(n),c(t,e,0,e.length-1)}function d(t,e){var n=e.pop();if(0!==e.length){var i=e[0];return e[0]=n,h(t,e,0),i}return n}function f(t,e,n){if(0===e.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=e[0];return e[0]=n,h(t,e,0),i}function p(t,e,n){var i;return 0!==e.length&&t(e[0],n)<0&&(i=e[0],e[0]=n,n=i,h(t,e,0)),n}function l(t,e){for(var n=e.length>>1;--n>=0;)h(t,e,n)}function g(t,e){for(var n=e.length,i=0,r=new Array(n);i<n;)r[i++]=d(t,e);return r}function y(t){if(this.clear(),this.comparator=t||a,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function m(t){if(this.clear(),this.comparator=t||a,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=s(this.comparator)}y.prototype.clear=function(){this.items=[],this.size=0},y.prototype.push=function(t){return u(this.comparator,this.items,t),++this.size},y.prototype.peek=function(){return this.items[0]},y.prototype.pop=function(){return 0!==this.size&&this.size--,d(this.comparator,this.items)},y.prototype.replace=function(t){return f(this.comparator,this.items,t)},y.prototype.pushpop=function(t){return p(this.comparator,this.items,t)},y.prototype.consume=function(){return this.size=0,g(this.comparator,this.items)},y.prototype.toArray=function(){return g(this.comparator,this.items.slice())},y.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:y,enumerable:!1}),t},"undefined"!=typeof Symbol&&(y.prototype[Symbol.for("nodejs.util.inspect.custom")]=y.prototype.inspect),m.prototype=y.prototype,y.from=function(t,e){var n,i=new y(e);return n=o.isArrayLike(t)?t.slice():o.toArray(t),l(i.comparator,n),i.items=n,i.size=n.length,i},m.from=function(t,e){var n,i=new m(e);return n=o.isArrayLike(t)?t.slice():o.toArray(t),l(i.comparator,n),i.items=n,i.size=n.length,i},y.siftUp=h,y.siftDown=c,y.push=u,y.pop=d,y.replace=f,y.pushpop=p,y.heapify=l,y.consume=g,y.nsmallest=function(t,e,n){2===arguments.length&&(n=e,e=t,t=a);var r,c,h,u,d=s(t),p=1/0;if(1===e){if(o.isArrayLike(n)){for(r=0,c=n.length;r<c;r++)h=n[r],(p===1/0||t(h,p)<0)&&(p=h);return(u=new n.constructor(1))[0]=p,u}return i(n,(function(e){(p===1/0||t(e,p)<0)&&(p=e)})),[p]}if(o.isArrayLike(n)){if(e>=n.length)return n.slice().sort(t);for(u=n.slice(0,e),l(d,u),r=e,c=n.length;r<c;r++)d(n[r],u[0])>0&&f(d,u,n[r]);return u.sort(t)}var g=o.guessLength(n);return null!==g&&g<e&&(e=g),u=new Array(e),r=0,i(n,(function(t){r<e?u[r]=t:(r===e&&l(d,u),d(t,u[0])>0&&f(d,u,t)),r++})),u.length>r&&(u.length=r),u.sort(t)},y.nlargest=function(t,e,n){2===arguments.length&&(n=e,e=t,t=a);var r,c,h,u,d=s(t),p=-1/0;if(1===e){if(o.isArrayLike(n)){for(r=0,c=n.length;r<c;r++)h=n[r],(p===-1/0||t(h,p)>0)&&(p=h);return(u=new n.constructor(1))[0]=p,u}return i(n,(function(e){(p===-1/0||t(e,p)>0)&&(p=e)})),[p]}if(o.isArrayLike(n)){if(e>=n.length)return n.slice().sort(d);for(u=n.slice(0,e),l(t,u),r=e,c=n.length;r<c;r++)t(n[r],u[0])>0&&f(t,u,n[r]);return u.sort(d)}var g=o.guessLength(n);return null!==g&&g<e&&(e=g),u=new Array(e),r=0,i(n,(function(n){r<e?u[r]=n:(r===e&&l(t,u),t(n,u[0])>0&&f(t,u,n)),r++})),u.length>r&&(u.length=r),u.sort(d)},y.MinHeap=y,y.MaxHeap=m,t.exports=y},6937:(t,e,n)=>{var i=n(4993),r=n(113);function o(){this.clear()}o.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},o.prototype.enqueue=function(t){return this.items.push(t),++this.size},o.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}},o.prototype.peek=function(){if(this.size)return this.items[this.offset]},o.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)},o.prototype.toArray=function(){return this.items.slice(this.offset)},o.prototype.values=function(){var t=this.items,e=this.offset;return new i((function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}}))},o.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new i((function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}}))},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.toString=function(){return this.toArray().join(",")},o.prototype.toJSON=function(){return this.toArray()},o.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:o,enumerable:!1}),t},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(t){var e=new o;return r(t,(function(t){e.enqueue(t)})),e},o.of=function(){return o.from(arguments)},t.exports=o},5499:(t,e)=>{e.DEFAULT_COMPARATOR=function(t,e){return t<e?-1:t>e?1:0},e.DEFAULT_REVERSE_COMPARATOR=function(t,e){return t<e?1:t>e?-1:0},e.reverseComparator=function(t){return function(e,n){return t(n,e)}},e.createTupleComparator=function(t){return 2===t?function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:t[1]<e[1]?-1:t[1]>e[1]?1:0}:function(e,n){for(var i=0;i<t;){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1;i++}return 0}}},650:(t,e,n)=>{var i=n(113),r=n(3801);function o(t){return"number"==typeof t.length?t.length:"number"==typeof t.size?t.size:void 0}e.isArrayLike=function(t){return Array.isArray(t)||r.isTypedArray(t)},e.guessLength=o,e.toArray=function(t){var e=o(t),n="number"==typeof e?new Array(e):[],r=0;return i(t,(function(t){n[r++]=t})),n},e.toArrayWithIndices=function(t){var e=o(t),n="number"==typeof e?r.getPointerArray(e):Array,a="number"==typeof e?new Array(e):[],s="number"==typeof e?new n(e):[],c=0;return i(t,(function(t){a[c]=t,s[c]=c++})),[a,s]}},3801:(t,e)=>{var n=Math.pow(2,8)-1,i=Math.pow(2,16)-1,r=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;e.getPointerArray=function(t){var e=t-1;if(e<=n)return Uint8Array;if(e<=i)return Uint16Array;if(e<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(t){var e=t-1;return e<=o?Int8Array:e<=a?Int16Array:e<=s?Int32Array:Float64Array},e.getNumberType=function(t){return t===(0|t)?-1===Math.sign(t)?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var c={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(t,n){var i,r,o,a,s,h=null,u=0;for(a=0,s=t.length;a<s;a++)o=n?n(t[a]):t[a],r=e.getNumberType(o),(i=c[r.name])>u&&(u=i,h=r);return h},e.isTypedArray=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t)},e.concat=function(){var t,e,n,i=0;for(t=0,n=arguments.length;t<n;t++)i+=arguments[t].length;var r=new arguments[0].constructor(i);for(t=0,e=0;t<n;t++)r.set(arguments[t],e),e+=arguments[t].length;return r},e.indices=function(t){for(var n=new(e.getPointerArray(t))(t),i=0;i<t;i++)n[i]=i;return n}},113:(t,e,n)=>{var i=n(4844),r=i.ARRAY_BUFFER_SUPPORT,o=i.SYMBOL_SUPPORT;t.exports=function(t,e){var n,i,a,s,c;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof e)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||r&&ArrayBuffer.isView(t)||"string"==typeof t||"[object Arguments]"===t.toString())for(a=0,s=t.length;a<s;a++)e(t[a],a);else if("function"!=typeof t.forEach)if(o&&Symbol.iterator in t&&"function"!=typeof t.next&&(t=t[Symbol.iterator]()),"function"!=typeof t.next)for(i in t)t.hasOwnProperty(i)&&e(t[i],i);else for(n=t,a=0;!0!==(c=n.next()).done;)e(c.value,a),a++;else t.forEach(e)}},4993:t=>{function e(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}"undefined"!=typeof Symbol&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,n=t.length,i=0;return new e((function(){return i>=n?{done:!0}:{done:!1,value:t[i++]}}))},e.empty=function(){return new e((function(){return{done:!0}}))},e.fromSequence=function(t){var n=0,i=t.length;return new e((function(){return n>=i?{done:!0}:{done:!1,value:t[n++]}}))},e.is=function(t){return t instanceof e||"object"==typeof t&&null!==t&&"function"==typeof t.next},t.exports=e},4844:(t,e)=>{e.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,e.SYMBOL_SUPPORT="undefined"!=typeof Symbol},7906:(t,e,n)=>{"use strict";var i=n(4530),r=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},o=function(t){return function(){var e,n,o=48,a=1,s=o,c=new Array(o),h=0,u=new r;for(e=0;e<o;e++)c[e]=u(Math.random());var d=function(){++s>=o&&(s=0);var t=1768863*c[s]+2.3283064365386963e-10*a;return c[s]=t-(a=0|t)},f=function(t){return Math.floor(t*(d()+11102230246251565e-32*(2097152*d()|0)))};f.string=function(t){var e,n="";for(e=0;e<t;e++)n+=String.fromCharCode(33+f(94));return n};return f.cleanString=function(t){return t=(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},f.hashString=function(t){for(t=f.cleanString(t),u(t),e=0;e<t.length;e++)for(h=t.charCodeAt(e),n=0;n<o;n++)c[n]-=u(h),c[n]<0&&(c[n]+=1)},f.seed=function(t){null==t&&(t=Math.random()),"string"!=typeof t&&(t=i(t,(function(t,e){return"function"==typeof e?e.toString():e}))),f.initState(),f.hashString(t)},f.addEntropy=function(){var t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);!function(){var t=Array.prototype.slice.call(arguments);for(e=0;e<t.length;e++)for(n=0;n<o;n++)c[n]-=u(t[e]),c[n]<0&&(c[n]+=1)}(h+++(new Date).getTime()+t.join("")+Math.random())},f.initState=function(){for(u(),e=0;e<o;e++)c[e]=u(" ");a=1,s=o},f.done=function(){u=null},void 0!==t&&f.seed(t),f.range=function(t){return f(t)},f.random=function(){return f(Number.MAX_VALUE-1)/Number.MAX_VALUE},f.floatBetween=function(t,e){return f.random()*(e-t)+t},f.intBetween=function(t,e){return Math.floor(f.random()*(e-t+1))+t},f}()};o.create=function(t){return new o(t)},t.exports=o},2146:(t,e,n)=>{"use strict";n.d(e,{Hx:()=>c,HD:()=>s});var i=n(779);class r{isCurrent(){return this._players.currentPosition.includes(this.position)}setCurrent(){return this._players.setCurrent(this)}others(){return Array.from(this._players).filter((t=>t!==this))}other(){if(2!==this._players.length)throw Error("Can only use `other` for 2 player games");return this._players.find((t=>t!==this))}allMy(t,...e){return"function"==typeof t&&"isGameElement"in t?this.board.all(t,{owner:this},...e):(t&&(e=[t,...e]),this.board.all({owner:this},...e))}my(t,...e){return"function"==typeof t&&"isGameElement"in t?this.board.first(t,{owner:this},...e):(t&&(e=[t,...e]),this.board.first({owner:this},...e))}has(t,...e){return"function"==typeof t&&"isGameElement"in t?this.board.has(t,{owner:this},...e):(t&&(e=[t,...e]),this.board.has(i.Z,{owner:this},...e))}toJSON(){let{_players:t,board:e,game:n,...i}=this;return i=Object.fromEntries(Object.entries(i).filter((([,t])=>"function"!=typeof t))),i}toString(){return this.name}}const o=(t,e=!0)=>t instanceof r?`$p[${t.position}]`:t instanceof i.Z?e?`$el[${t.branch()}]`:`$eid[${t._t.id}]`:t,a=(t,e)=>{if("number"==typeof t||"boolean"==typeof t)return t;let n;if("$p["===t.slice(0,3))n=e.players.atPosition(parseInt(t.slice(3,-1)));else if("$el["===t.slice(0,4))n=e.board.atBranch(t.slice(4,-1));else{if("$eid["!==t.slice(0,5))return t;n=e.board.atID(parseInt(t.slice(5,-1)))}if(!n)throw Error(`Unable to find arg: ${t}`);return n},s=(t,e=!0)=>Object.fromEntries(Object.entries(t).map((([t,n])=>[t,h(n,e)]))),c=(t,e)=>Object.fromEntries(Object.entries(t).map((([t,n])=>[t,u(n,e)]))),h=(t,e=!0)=>{if(void 0!==t){if(null===t)return null;if(t instanceof Array)return t.map((t=>h(t,e)));if(t instanceof r||t instanceof i.Z)return o(t,e);if("object"==typeof t)return s(t,e);if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return o(t,e);throw Error(`unable to serialize ${t}`)}},u=(t,e)=>{if(void 0!==t){if(null===t)return null;if(t instanceof Array)return t.map((t=>u(t,e)));if("object"==typeof t)return c(t,e);if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return a(t,e);throw Error(`unable to deserialize ${t}`)}}},1122:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(7199),r=n(2146);class o extends i.Z{constructor(t){super({...t,trackMovement:!1}),this._ui={boardSize:{name:"_default",aspectRatio:1},layouts:[],appearance:{},stepLayouts:{},previousStyles:{}},this.board=this,this._ctx.removed=this.createElement(i.Z,"removed"),this.pile=this._ctx.removed}registerClasses(...t){this._ctx.classRegistry=this._ctx.classRegistry.concat(t)}allJSON(t){return[this.toJSON(t)].concat(this._ctx.removed._t.children.map((e=>e.toJSON(t))))}fromJSON(t){let{className:e,children:n,_id:i,order:o,...a}=t[0];if(this._ctx.game&&(a=(0,r.Hx)({...a},this._ctx.game)),this.constructor.name!==e)throw Error(`Cannot create board from JSON. ${e} must equal ${this.constructor.name}`);for(const r of Object.keys(this))["_ctx","_t","_ui","_eventHandlers","board","game","pile"].includes(r)||r in a||(a[r]=void 0);Object.assign(this,{...a}),n&&this.createChildrenFromJSON(n,"0"),o&&(this._t.order=o),this._ctx.removed.createChildrenFromJSON(t.slice(1),"1")}resetUI(){var t;super.resetUI(),this._ui.stepLayouts={"step:out-of-turn":{element:this,top:0,left:0}},(t=this._ui).previousStyles||(t.previousStyles={})}setBoardSize(t){t.name!==this._ui.boardSize.name&&(this._ui.boardSize=t)}getBoardSize(t,e,n){return this._ui.boardSizes&&this._ui.boardSizes(t,e,n)||{name:"_default",aspectRatio:1}}applyLayouts(t=!1,e){this._ui.setupLayout&&(this.resetUI(),this._ui.setupLayout(this,this._ctx.player,this._ui.boardSize.name)),e&&e(this);const n=this._ui.boardSize.aspectRatio;return this._ui.frame={left:0,top:0,width:n<1?100*n:100,height:n>1?100/n:100},super.applyLayouts(t)}layoutStep(t,e){if("out-of-turn"!==t&&!this._ctx.game.flow.getStep(t))throw Error(`No such step: ${t}`);this._ui.stepLayouts["step:"+t]=e}layoutAction(t,e){this._ui.stepLayouts["action:"+t]=e}disableDefaultAppearance(){this._ui.disabledDefaultAppearance=!0}}},1309:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(779);class r extends Array{slice(...t){return super.slice(...t)}filter(...t){return super.filter(...t)}all(t,...e){return"function"==typeof t&&"isGameElement"in t?this._finder(t,{},...e):(t&&(e=[t,...e]),this._finder(i.Z,{},...e))}_finder(t,e,...n){const i=new r;if(void 0!==e.limit&&e.limit<=0)return i;const o=n.map((t=>{if("object"==typeof t){const e=t;return t=>Object.entries(e).every((([e,n])=>("empty"===e?t.isEmpty():t[e])===n))}if("string"==typeof t){const e=t;return t=>t.name===e}return t})),a=(r,a)=>{r instanceof t&&o.every((t=>t(r)))&&("asc"===a?i.push(r):i.unshift(r)),void 0!==e.limit?i.push(...r._t.children._finder(t,{limit:e.limit-i.length,order:e.order},...n)):i.push(...r._t.children._finder(t,{},...n))};if("desc"===e.order)for(let r=this.length-1;r>=0;r--){const t=this[r];if(void 0!==e.limit&&i.length>=e.limit)break;a(t,"desc")}else for(const r of this){if(void 0!==e.limit&&i.length>=e.limit)break;a(r,"asc")}return i}first(t,...e){return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1},...e)[0]:(t&&(e=[t,...e]),this._finder(i.Z,{limit:1},...e)[0])}firstN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t},...n):(e&&(n=[e,...n]),this._finder(i.Z,{limit:t},...n))}last(t,...e){return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1,order:"desc"},...e)[0]:(t&&(e=[t,...e]),this._finder(i.Z,{limit:1,order:"desc"},...e)[0])}lastN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t,order:"desc"},...n):(e&&(n=[e,...n]),this._finder(i.Z,{limit:t,order:"desc"},...n))}top(t,...e){return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1},...e)[0]:(t&&(e=[t,...e]),this._finder(i.Z,{limit:1},...e)[0])}topN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t},...n):(e&&(n=[e,...n]),this._finder(i.Z,{limit:t},...n))}bottom(t,...e){return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1,order:"desc"},...e)[0]:(t&&(e=[t,...e]),this._finder(i.Z,{limit:1,order:"desc"},...e)[0])}bottomN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t,order:"desc"},...n):(e&&(n=[e,...n]),this._finder(i.Z,{limit:t,order:"desc"},...n))}showToAll(){for(const t of this)delete t._visible}showOnlyTo(t){"number"!=typeof t&&(t=t.position);for(const e of this)e._visible={default:!1,except:[t]}}showTo(...t){"number"!=typeof t[0]&&(t=t.map((t=>t.position)));for(const e of this)if(void 0!==e._visible)if(e._visible.default){if(!e._visible.except)continue;e._visible.except=e._visible.except.filter((e=>!t.includes(e)))}else e._visible.except=Array.from(new Set([...e._visible.except instanceof Array?e._visible.except:[],...t]))}hideFromAll(){for(const t of this)t._visible={default:!1}}hideFrom(...t){"number"!=typeof t[0]&&(t=t.map((t=>t.position)));for(const e of this)if(!1!==e._visible?.default||e._visible.except)if(void 0===e._visible||!0===e._visible.default)e._visible={default:!0,except:Array.from(new Set([...e._visible?.except instanceof Array?e._visible.except:[],...t]))};else{if(!e._visible.except)continue;e._visible.except=e._visible.except.filter((e=>!t.includes(e)))}}sortBy(t,e){const n=(t,e)=>"function"==typeof e?e(t):t[e],[i,r]="desc"===e?[-1,1]:[1,-1];return this.sort(((e,o)=>{const a=t instanceof Array?t:[t];for(const t of a){const a=n(e,t),s=n(o,t);if(a>s)return i;if(a<s)return r}return 0}))}sortedBy(t,e="asc"){return this.slice(0,this.length).sortBy(t,e)}sum(t){return this.reduce(((e,n)=>e+("function"==typeof t?t(n):n[t])),0)}withHighest(...t){return this.sortedBy(t,"desc")[0]}withLowest(...t){return this.sortedBy(t,"asc")[0]}max(t){const e=this.sortedBy(t,"desc")[0];if(e)return"function"==typeof t?t(e):e[t]}min(t){const e=this.sortedBy(t,"asc")[0];if(e)return"function"==typeof t?t(e):e[t]}areAllEqual(t){return 0===this.length||this.every((e=>e[t]===this[0][t]))}remove(){for(const t of this){if("isSpace"in t)throw Error("cannot move Space");t.remove()}}putInto(t,e){this.some((t=>t.hasChangedParent()))&&t.game.addDelay();for(const n of this){if("isSpace"in n)throw Error("cannot move Space");n.putInto(t,e)}}layout(t,e){for(const n of this)n.layout(t,e)}appearance(t){for(const e of this)e.appearance(t)}}},779:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(1309);const r=(t,e)=>Array.from(Array(t)).map(((t,n)=>e(n+1)));function o(t,e){return function(t,e){return{left:t.left+e.x,top:t.top+e.y,width:t.width,height:t.height}}((n=t,i={x:e.width/100,y:e.height/100},{left:n.left*i.x,top:n.top*i.y,width:n.width*i.x,height:n.height*i.y}),{x:e.left,y:e.top});var n,i}function a(t,e,n,i,r,o,a,s,c,h){if(!(t>r||e>o))return t-=1,e-=1,{left:n.left+a.x+(s?t*(i.width+s.x):i.width*(t*c.x+e*h.x)/100),top:n.top+a.y+(s?e*(i.height+s.y):i.height*(e*h.y+t*c.y)/100),width:i.width,height:i.height}}function s(t,e,n,i,r,o){let a,s;return void 0===r?(a=(n.width-(i.x||0)*(e-1))/e,s=(n.height-(i.y||0)*(t-1))/t):(a=n.width/((t-1)*Math.abs(o.x/100)+1+(e-1)*Math.abs(r.x/100)),s=n.height/((e-1)*Math.abs(r.y/100)+1+(t-1)*Math.abs(o.y/100))),{width:a,height:s}}function c(t,e,n,i,r,o,s,c){const h=[a(1,1,t,e,n,i,r,o,s,c),a(1,i,t,e,n,i,r,o,s,c),a(n,i,t,e,n,i,r,o,s,c),a(n,1,t,e,n,i,r,o,s,c)],u={top:Math.min(...h.map((t=>t.top))),bottom:Math.max(...h.map((t=>t.top+t.height))),left:Math.min(...h.map((t=>t.left))),right:Math.max(...h.map((t=>t.left+t.width)))};return{width:u.right-u.left,height:u.bottom-u.top,left:u.left,top:u.top}}var h=n(2146),u=n(7906);class d{constructor(t){this._ui={layouts:[],appearance:{}},this._ctx=t,t.top||(this._ctx.top=this,this._ctx.sequence=0),this._ctx.namedSpaces||(this._ctx.uniqueNames={},this._ctx.namedSpaces={}),this.game=this._ctx.game,this._t={children:new i.Z,id:this._ctx.sequence++,setId:t=>{void 0!==t&&(this._t.id=t,this._ctx.sequence<t&&(this._ctx.sequence=t))}}}toString(){return this.name||this.constructor.name.replace(/([a-z0-9])([A-Z])/g,"$1 $2")}all(t,...e){return"function"==typeof t&&"isGameElement"in t?this._t.children.all(t,...e):(t&&(e=[t,...e]),this._t.children.all(d,...e))}first(t,...e){return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1},...e)[0]:(t&&(e=[t,...e]),this._t.children._finder(d,{limit:1},...e)[0])}firstN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t},...n):(e&&(n=[e,...n]),this._t.children._finder(d,{limit:t},...n))}last(t,...e){return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1,order:"desc"},...e)[0]:(t&&(e=[t,...e]),this._t.children._finder(d,{limit:1,order:"desc"},...e)[0])}lastN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t,order:"desc"},...n):this._t.children._finder(d,{limit:t,order:"desc"},e,...n)}top(t,...e){return"function"==typeof t&&"isGameElement"in t?this._t.children.all(t,...e)[0]:(t&&(e=[t,...e]),this._t.children._finder(d,{limit:1},...e)[0])}topN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t},...n):(e&&(n=[e,...n]),this._t.children._finder(d,{limit:t},...n))}bottom(t,...e){return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1,order:"desc"},...e)[0]:(t&&(e=[t,...e]),this._t.children._finder(d,{limit:1,order:"desc"},...e)[0])}bottomN(t,e,...n){if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t,order:"desc"},...n):(e&&(n=[e,...n]),this._t.children._finder(d,{limit:t,order:"desc"},...n))}others(t,...e){if(this._t.parent||new i.Z,"function"!=typeof t||!("isGameElement"in t)){t&&(e=[t,...e]);const n=this._otherFinder(e);return this._t.parent._t.children._finder(d,{},n,...e)}const n=this._otherFinder(e);return this._t.parent._t.children._finder(t,{},n,...e)}has(t,...e){return"function"==typeof t&&"isGameElement"in t?!!this.first(t,...e):(t&&(e=[t,...e]),!!this.first(d,...e))}adjacentTo(t){return this._t.parent?._t.graph?this._t.parent._t.graph.areNeighbors(this._t.id,t._t.id):void 0!==this.row&&void 0!==this.column&&(void 0!==t.row&&void 0!==t.column&&(this.column===t.column&&[t.row+1,t.row-1].includes(this.row)||this.row===t.row&&[t.column+1,t.column-1].includes(this.column)))}adjacencies(t,...e){let n=d;return"function"==typeof t&&"isGameElement"in t?n=t:t&&(e=[t,...e]),this._t.parent?._t.graph?new i.Z(...this._t.parent?._t.graph.mapNeighbors(this._t.id,(t=>this._t.parent._t.graph.getNodeAttribute(t,"space")))).all(n,...e):void 0!==this.row&&void 0!==this.column&&this._t.parent?this._t.parent._t.children.filter((t=>void 0!==t.row&&void 0!==t.column&&(this.column===t.column&&[t.row+1,t.row-1].includes(this.row)||this.row===t.row&&[t.column+1,t.column-1].includes(this.column)))):new i.Z}_otherFinder(t){return t=>t!==this}setOrder(t){this._t.order=t}container(t){return t?this._t.parent?this._t.parent instanceof t?this._t.parent:this._t.parent.container(t):void 0:this._t.parent}isEmpty(){return!this._t.children.length}sortBy(t,e){return this._t.children.sortBy(t,e)}shuffle(){((t,e)=>{for(let n=t.length-1;n>0;n--){const i=Math.floor(e()*(n+1));[t[n],t[i]]=[t[i],t[n]]}})(this._t.children,this._ctx.game?.random||Math.random)}get owner(){return void 0!==this.player?this.player:this._t.parent?.owner}get mine(){return!!this._ctx.player&&this.owner===this._ctx.player}showToAll(){delete this._visible}showOnlyTo(t){"number"!=typeof t&&(t=t.position),this._visible={default:!1,except:[t]}}showTo(...t){if("number"!=typeof t[0]&&(t=t.map((t=>t.position))),void 0!==this._visible)if(this._visible.default){if(!this._visible.except)return;this._visible.except=this._visible.except.filter((e=>!t.includes(e)))}else this._visible.except=Array.from(new Set([...this._visible.except instanceof Array?this._visible.except:[],...t]))}hideFromAll(){this._visible={default:!1}}hideFrom(...t){if("number"!=typeof t[0]&&(t=t.map((t=>t.position))),!1!==this._visible?.default||this._visible.except)if(void 0===this._visible||!0===this._visible.default)this._visible={default:!0,except:Array.from(new Set([...this._visible?.except instanceof Array?this._visible.except:[],...t]))};else{if(!this._visible.except)return;this._visible.except=this._visible.except.filter((e=>!t.includes(e)))}}isVisibleTo(t){return"number"!=typeof t&&(t=t.position),void 0===this._visible||(this._visible.default?!this._visible.except||!this._visible.except.includes(t):this._visible.except?.includes(t)||!1)}isVisible(){if(!this._ctx.player)throw Error("Cannot use isVisible outside of a player context");return this.isVisibleTo(this._ctx.player.position)}static revealWhenHidden(...t){this.visibleAttributes=t}create(t,e,n){if("started"===this._ctx.game?.phase)throw Error("Board elements cannot be created once game has started.");const i=this.createElement(t,e,n);return i._t.parent=this,"stacking"===this._t.order?this._t.children.unshift(i):this._t.children.push(i),"isSpace"in i&&e&&(e in this._ctx.uniqueNames?(delete this._ctx.namedSpaces[e],this._ctx.uniqueNames[e]=!1):(this._ctx.namedSpaces[e]=i,this._ctx.uniqueNames[e]=!0)),i}createMany(t,e,n,o){return new i.Z(...r(t,(t=>this.create(e,n,"function"==typeof o?o(t):o))))}createGrid({rows:t,columns:e,style:n},o,a,s){const c=new i.Z;return r(t,(t=>r(e,(i=>{const r=this.create(o,a,{row:t,column:i,...s});return c[(t-1)*e+i-1]=r,t>1&&r.connectTo(c[(t-2)*e+i-1]),i>1&&r.connectTo(c[(t-1)*e+i-2]),"hex"===n&&t>1&&i>1&&r.connectTo(c[(t-2)*e+i-2]),"hex-inverse"===n&&t>1&&i<e&&r.connectTo(c[(t-2)*e+i]),r})))),c}createElement(t,e,n){if(!this._ctx.classRegistry.includes(t)){const e=this._ctx.classRegistry.find((e=>e.name===t.name));if(!e)throw Error(`No class found ${t.name}. Declare any classes in \`board.registerClasses\``);t=e}const i=new t(this._ctx);return i.board=this.board,i.name=e,Object.assign(i,n),i}branch(){const t=[];let e=this;for(;e._t.parent;){if(-1===e._t.parent._t.children.indexOf(e))throw Error(`Reference to element ${this.constructor.name}${this.name?":"+this.name:""} is no longer current`);t.unshift(e._t.parent._t.children.indexOf(e)),e=e._t.parent}return t.unshift(this._ctx.removed===e?1:0),t.join("/")}atBranch(t){let e=t.split("/"),n=parseInt(e[0]),i=0===n?this._ctx.top:this._ctx.removed._t.children[n-1];for(e.shift();void 0!==e[0];)i=i._t.children[parseInt(e[0])],e.shift();return i}atID(t){return this._t.children.find((e=>e._t.id===t))||this._t.children.find((e=>e.atID(t)))?.atID(t)}atPosition({column:t,row:e}){return this._t.children.find((n=>n.row===e&&n.column===t))}isDescendantOf(t){return this._t.parent===t||!!this._t.parent?.isDescendantOf(t)}attributeList(){let t;({...t}=this);for(const e of["_t","_ctx","_ui","board","game","pile","_eventHandlers"])delete t[e];return Object.fromEntries(Object.entries(t).filter((([,t])=>"function"!=typeof t)))}toJSON(t){let e=this.attributeList();void 0===t||this.isVisibleTo(t)||(e=Object.fromEntries(Object.entries(e).filter((([t])=>"_visible"===t||"name"!==t&&this.constructor.visibleAttributes?.includes(t)))));const n=Object.assign((0,h.HD)(e,void 0!==t),{className:this.constructor.name});return(void 0===t||"isSpace"in this||e.name)&&(n._id=this._t.id),this._t.order&&(n.order=this._t.order),this._t.was&&(n.was=this._t.was),t&&this._t.was&&"stacking"===this._t.parent?._t.order&&!this.hasChangedParent()&&!this.isVisibleTo(t)&&(n.was=this.branch()),!this._t.children.length||t&&!this.isVisibleTo(t)||(n.children=Array.from(this._t.children.map((e=>e.toJSON(t))))),n}createChildrenFromJSON(t,e){const n=[...this._t.children];this._t.children=new i.Z;for(let i=0;i!==t.length;i++){const r=t[i];let o,{className:a,children:s,was:c,_id:u,name:d,order:f,...p}=r;if(this._ctx.game&&(p=(0,h.Hx)({...p},this._ctx.game)),void 0!==u&&(o=n.find((t=>t._t.id===u&&t.name===d)),o)){for(const t of Object.keys(o))["_ctx","_t","_ui","_eventHandlers","board","game","name","row","column"].includes(t)||t in p||(p[t]=void 0);Object.assign(o,p)}if(!o){const t=this._ctx.classRegistry.find((t=>t.name===a));if(!t)throw Error(`No class found ${a}. Declare any classes in \`game.defineBoard\``);o=this.createElement(t,d,p),o._t.setId(u),o._t.parent=this,o._t.order=f}o._t.was=c,this._ctx.trackMovement&&!("isSpace"in o)&&(o._t.was=e+"/"+i),this._t.children.push(o),o.createChildrenFromJSON(s||[],e+"/"+i)}}cloneInto(t){let e=this.attributeList();const n=t.createElement(this.constructor,this.name,e);"stacking"===t._t.order?t._t.children.unshift(n):t._t.children.push(n),n._t.parent=t,n._t.order=this._t.order;for(const i of this._t.children)i.cloneInto(n);return n}resetUI(){this._ui.layouts=[{applyTo:d,attributes:{margin:0,scaling:"fit",alignment:"center",gap:0,direction:"square"}}],this._ui.appearance={},this._ui.computedStyle=void 0;for(const t of this._t.children)t.resetUI()}absoluteTransform(t){return t??(t=this.relativeTransformToBoard()),this.board._ui.frame?o(t,this.board._ui.frame):t}relativeTransformToBoard(){let t=this._ui.computedStyle||{left:0,top:0,width:100,height:100},e=this._t.parent;for(;e?._ui.computedStyle;)t=o(t,e._ui.computedStyle),e=e._t.parent;return t}layout(t,e){const{slots:n,area:i,size:r,aspectRatio:o,scaling:a,gap:s,margin:c,offsetColumn:h,offsetRow:u}=e;0===this._ui.layouts.length&&this.resetUI(),n&&(i||c||a||s||c||h||u)&&console.warn("Layout has `slots` which overrides supplied grid parameters"),i&&c&&console.warn("Both `area` and `margin` supplied in layout. `margin` is ignored"),r&&o&&console.warn("Both `size` and `aspectRatio` supplied in layout. `aspectRatio` is ignored"),s&&(h||u)&&console.warn("Both `gap` and `offset` supplied in layout. `gap` is ignored"),r||"none"!==a||(console.warn("Layout `scaling` as 'none' has no meaning without `size` and will instead default to 'fit'"),e={...e,scaling:"fit"}),c||i||(e.margin=0),this._ui.layouts.push({applyTo:t,attributes:{scaling:"fit",alignment:"center",direction:"square",...e}}),this._ui.layouts.sort(((t,e)=>{let n=0,i=0;if(t.applyTo instanceof d&&(n=3),e.applyTo instanceof d&&(i=3),"string"==typeof t.applyTo&&(n=2),"string"==typeof e.applyTo&&(i=2),t.applyTo instanceof Array&&(n=1),e.applyTo instanceof Array&&(i=1),0!==n||0!==i)return n-i;const r=t.applyTo,o=e.applyTo;return r.prototype instanceof o?1:o.prototype instanceof r?-1:0}));for(const d of this._t.children)d._ui.computedStyle=void 0}applyLayouts(t=!1){if(!1===this._ui.appearance.render)return;this._ui.computedStyle||(t=!0,this._ui.computedStyle={left:0,top:0,width:100,height:100});const e=this.getLayoutItems(),n=this.absoluteTransform();for(let i=this._ui.layouts.length-1;i>=0;i--){const{attributes:r}=this._ui.layouts[i];let o=e[i];const{slots:h,direction:d,gap:f,scaling:p,alignment:l,maxOverlap:g}=r;let{size:y,aspectRatio:m,haphazardly:w}=r;const v=this.getArea(r);let b=h||[];this._ui.computedLayouts||(this._ui.computedLayouts=[]),this._ui.computedLayouts[i]={area:v,children:o??[],showBoundingBox:r.showBoundingBox,drawer:r.drawer};let _="number"==typeof r.columns?r.columns:r.columns?.min||1,x="number"==typeof r.rows?r.rows:r.rows?.min||1;if(!o?.length&&1===x&&1===_)continue;if(o??(o=[]),!h){const t=[],e={},h={};for(let n=0;n!=o.length;n++){const i=o[n];void 0!==i.column&&void 0!==i.row&&(t[n]=[i.column,i.row],(void 0===e.column||i.column<e.column)&&(e.column=i.column),(void 0===e.row||i.row<e.row)&&(e.row=i.row),(void 0===h.column||i.column>h.column)&&(h.column=i.column),(void 0===h.row||i.row>h.row)&&(h.row=i.row))}e.column??(e.column=1),e.row??(e.row=1),h.column??(h.column=1),h.row??(h.row=1),_=Math.max(_,h.column-e.column+1),x=Math.max(x,h.row-e.row+1);let u="number"==typeof r.columns?r.columns:r.columns?.max||1/0,E="number"==typeof r.rows?r.rows:r.rows?.max||1/0,k=_,A=x,G={column:1,row:1};const S={left:l.includes("left")?0:l.includes("right")?1:.5,top:l.includes("top")?0:l.includes("bottom")?1:.5};if(o.length){let n,i,a;"square"===d?(k=Math.max(_,Math.min(u,Math.ceil(o.length/x),Math.max(Math.ceil(o.length/E),Math.ceil(Math.sqrt(o.length))))),A=Math.max(x,Math.min(E,Math.ceil(o.length/_),Math.ceil(o.length/k)))):A*k<o.length&&(["ltr","ltr-btt","rtl","rtl-btt"].includes(d)&&(k=Math.max(k,Math.min(u,Math.ceil(o.length/A))),A=Math.max(A,Math.min(E,Math.ceil(o.length/k)))),["ttb","btt","ttb-rtl","btt-rtl"].includes(d)&&(A=Math.max(A,Math.min(E,Math.ceil(o.length/k))),k=Math.max(k,Math.min(u,Math.ceil(o.length/A))))),G={column:Math.min(e.column,h.column,Math.max(1,h.column-k+1)),row:Math.min(e.row,h.row,Math.max(1,h.row-A+1))};let s=d;switch("square"===s&&(s=["left","top left","top","center"].includes(l)?"ltr":["right","top right"].includes(l)?"rtl":["bottom","bottom left"].includes(l)?"ltr-btt":"rtl-btt"),s){case"ltr":n={x:1,y:1},i={x:1,y:0},a={x:-k,y:1};break;case"rtl":n={x:k,y:1},i={x:-1,y:0},a={x:k,y:1};break;case"ttb":n={x:1,y:1},i={x:0,y:1},a={x:1,y:-A};break;case"btt":n={x:1,y:A},i={x:0,y:-1},a={x:1,y:A};break;case"ltr-btt":n={x:1,y:A},i={x:1,y:0},a={x:-k,y:-1};break;case"rtl-btt":n={x:k,y:A},i={x:-1,y:0},a={x:k,y:-1};break;case"ttb-rtl":n={x:k,y:1},i={x:0,y:1},a={x:-1,y:-A};break;case"btt-rtl":n={x:k,y:A},i={x:0,y:-1},a={x:-1,y:A}}let c=0;for(;c!=o.length;){const e=o[c];if(void 0===e.column||void 0===e.row){const o=[n.x+G.column-1,n.y+G.row-1];if(t.every((([t,e])=>t!==o[0]||e!==o[1]))&&(t[c]=o,r.sticky&&(e.column=o[0],e.row=o[1]),c++),n.x+=i.x,n.y+=i.y,(n.x>k||n.x<=0||n.y>A||n.y<=0)&&(n.x+=a.x,n.y+=a.y),n.x>k||n.x<=0||n.y>A||n.y<=0)break}else c++}}let L,N,M;if(r.offsetColumn||r.offsetRow?(M="number"==typeof r.offsetColumn?{x:r.offsetColumn,y:0}:r.offsetColumn,N="number"==typeof r.offsetRow?{x:0,y:r.offsetRow}:r.offsetRow,N||(N={x:-M.y,y:M.x}),M||(M={x:N.y,y:-N.x})):L={x:(f&&("number"==typeof f?f:f.x)||0)/n.width*100,y:(f&&("number"==typeof f?f:f.y)||0)/n.height*100},!y){if(y=s(A,k,v,L,M,N),!m){let t=1/0,e=0;for(const n of o){const i=n._ui.appearance.aspectRatio;void 0!==i&&(i<t&&(t=i),i>e&&(e=i))}(t<1/0||e>0)&&(m=e>1&&t<1?1:t>1?t:e)}m&&(m*=n.height/n.width,m>y.width/y.height?y.height=y.width/m:y.width=m*y.height)}if(!o.length){this._ui.computedLayouts[i].grid={anchor:{x:0,y:0},origin:G,rows:A,columns:k,offsetColumn:M??{x:y.width+L.x,y:0},offsetRow:N??{x:0,y:y.height+L.y}};continue}w?w*=.2+Math.max(0,L?L.x/y.width+L.y/y.height:(Math.abs(M.x)+Math.abs(M.y)+Math.abs(N.y)+Math.abs(M.y)-200)/100):w=0;const O={x:0,y:0};let D=c(v,y,k,A,O,L,M,N),z={x:1,y:1};if("fill"===p){const t=Math.max(v.width/D.width,v.height/D.height);z={x:t,y:t}}else if("fit"===p&&r.size){const t=Math.min(v.width/D.width,v.height/D.height);z={x:t,y:t}}const U=s(x,_,v,L,M,N);if(void 0!==g){const t=s(A,k,v,L?{x:Math.min(-g*y.width/100,L.x),y:Math.min(-g*y.height/100,L.y)}:void 0,M?{x:Math.min(100-g,M.x),y:Math.min(100-g,M.y)}:void 0,N?{x:Math.min(100-g,N.x),y:Math.min(100-g,N.y)}:void 0);U.width=Math.min(U.width,t.width),U.height=Math.min(U.height,t.height)}if(y.width*z.x>U.width){const t=U.width/y.width/z.x;z.x*=t,z.y*=t}if(y.height*z.y>U.height){const t=U.height/y.height/z.y;z.x*=t,z.y*=t}if(y.width*=z.x,y.height*=z.y,L){"fill"===p&&(A>1&&(L.y=Math.min(L.y||0,(v.height-A*y.height)/(A-1))),k>1&&(L.x=Math.min(L.x||0,(v.width-k*y.width)/(k-1))));const t=k*(y.width+L.x)-L.x;O.x+=S.left*(v.width-t);const e=A*(y.height+L.y)-L.y;O.y+=S.top*(v.height-e)}else{if("fill"===p){if(v.width*z.x/D.width>v.height*z.y/D.height){const t=(v.height-y.height)/(D.height*z.y-y.height);t<1&&(z.y=z.x=v.height/D.height,M.y*=t,N.y*=t)}else{const t=(v.width-y.width)/(D.width*z.x-y.width);t<1&&(z.y=z.x=v.width/D.width,M.x*=t,N.x*=t)}D=c(v,y,k,A,O,L,M,N)}O.x+=v.left-D.left*z.x+S.left*(v.width-D.width*z.x),O.y+=v.top-D.top*z.y+S.top*(v.height-D.height*z.y)}for(let n=0;n!==o.length;n++){let[e,i]=t[n];e-=G.column-1,i-=G.row-1;const r=a(e,i,v,y,k,A,O,L,M,N);r&&(b[n]=r)}this._ui.computedLayouts[i].grid={anchor:O,origin:G,rows:A,columns:k,offsetColumn:M??{x:y.width+L.x,y:0},offsetRow:N??{x:0,y:y.height+L.y}}}const E=u.create("ge"+this.name).random;for(let e=0;e!==o.length;e++){const i=b[e];if(!i)continue;const r=o[e];let a=r._ui.appearance.aspectRatio;a&&(a*=n.height/n.width);let{width:s,height:c}=i;a&&a!==s/c&&(a>s/c?c=s/a:s=a*c);let h=i.left+(i.width-s)/2,u=i.top+(i.height-c)/2;if(w){let t={x:0,y:0},e=1/0;for(let n=0;n<10;n++){const n=E(),i=E(),r={x:w?Math.min(v.left+v.width-h-s,Math.max(v.left-h,(n-((h-v.left)/(v.width-s)-.5)/2-.5)*w*(y.width+y.height))):0,y:w?Math.min(v.top+v.height-u-c,Math.max(v.top-u,(i-((u-v.top)/(v.height-c)-.5)/2-.5)*w*(y.width+y.height))):0};let a=1/0;if(o.every((t=>{if(!t._ui.computedStyle)return!0;const e=t._ui.computedStyle,n=Math.min(Math.max(0,e.left+e.width-h-r.x),Math.max(0,e.top+e.height-u-r.y),Math.max(0,h+s+r.x-e.left),Math.max(0,u+c+r.y-e.top));if(0===n)return!0;a=Math.min(n,a)}))){t=r;break}a<e&&(e=a,t=r)}h+=t.x,u+=t.y}r._ui.computedStyle={width:s,height:c,left:h,top:u},r.applyLayouts(t)}}}getLayoutItems(){const t=[];for(const e of this._t.children)if(!1!==e._ui.appearance.render)for(let n=this._ui.layouts.length-1;n>=0;n--){const{applyTo:r,attributes:o}=this._ui.layouts[n];if("function"==typeof r&&e instanceof r||"string"==typeof r&&e.name===r||e===r||r instanceof i.Z&&r.includes(e)){if(void 0!==o.limit&&o.limit<=(t[n]?.length??0))break;t[n]??(t[n]=[]),"stacking"===this._t.order?t[n].unshift(e):t[n].push(e);break}}return t}getArea(t){let{area:e,margin:n}=t;if(e)return e;if(!n)return{left:0,top:0,width:100,height:100};const i=this.absoluteTransform(),r=i.width/100,o=i.height/100;return n="number"==typeof n?{left:n,right:n,top:n,bottom:n}:{...n},n.left/=r,n.right/=r,n.top/=o,n.bottom/=o,{left:n.left,top:n.top,width:100-n.left-n.right,height:100-n.top-n.bottom}}appearance(t){Object.assign(this._ui.appearance,t)}resetMovementTracking(){this._t.was=this.branch();for(const t of this._t.children)t.resetMovementTracking()}hasChangedParent(){const t=this.branch();return!(!this._t.was||this._t.was===t)&&this._t.was?.substring(0,this._t.was?.lastIndexOf("/"))!==t.substring(0,t.lastIndexOf("/"))}}d.isGameElement=!0;const f=d},7199:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(779),r=n(1309),o=n(2698),a=n(2816),s=n(7918);class c extends i.Z{constructor(){super(...arguments),this._eventHandlers={enter:[],exit:[]}}isSpace(){return!0}create(t,e,n){const i=super.create(t,e,n);return this.triggerEvent("enter",i),i}addEventHandler(t,e){this._eventHandlers[t].push(e)}onEnter(t,e){this.addEventHandler("enter",{callback:e,type:t})}onExit(t,e){this.addEventHandler("exit",{callback:e,type:t})}triggerEvent(t,e){for(const n of this._eventHandlers[t])("enter"!==t||e instanceof n.type)&&("exit"!==t||e instanceof n.type)&&n.callback(e)}connectTo(t,e=1){if(!this._t.parent||this._t.parent!==t._t.parent)throw Error("Cannot connect two spaces that are not in the same parent space");this._t.parent._t.graph||(this._t.parent._t.graph=new o.UndirectedGraph);const n=this._t.parent._t.graph;return n.hasNode(this._t.id)||n.addNode(this._t.id,{space:this}),n.hasNode(t._t.id)||n.addNode(t._t.id,{space:t}),n.addEdge(this._t.id,t._t.id,{distance:e}),this}distanceTo(t){if(this._t.parent?._t.graph)try{const e=this._t.parent._t.graph,n=a.dijkstra.bidirectional(e,this._t.id,t._t.id,"distance");let i=0;for(let t=1;t!=n.length;t++)i+=e.getEdgeAttributes(e.edge(n[t-1],n[t])).distance;return i}catch(e){return}}closest(t,...e){let n=c;if("function"==typeof t&&"isGameElement"in t?n=t:t&&(e=[t,...e]),!this._t.parent?._t.graph)return;return this.others(n,...e).sortBy((t=>{const e=this.distanceTo(t);return void 0===e?1/0:e}))[0]}withinDistance(t){const e=new r.Z;try{const n=this._t.parent._t.graph;(0,s.ah)(n,this._t.id,(i=>{const r=n.getNodeAttributes(i).space,o=this.distanceTo(r);return void 0!==o&&(o>t||void(r!==this&&e.push(r)))}))}catch(n){throw Error("No connections on this space")}return e}_otherFinder(t){let e=t=>t!==this;for(const n of t)if("object"==typeof n){if(void 0!==n.adjacent){const t=n.adjacent;e=e=>this.adjacentTo(e)===t&&e!==this,delete n.adjacent}if(void 0!==n.withinDistance){const t=n.withinDistance;e=e=>{const n=this.distanceTo(e);return void 0!==n&&(n<=t&&e!==this)},delete n.withinDistance}}return e}}},5354:(t,e,n)=>{"use strict";n.d(e,{_Z:()=>s});var i=n(779),r=n(7199);class o extends i.Z{putInto(t,e){if(t.isDescendantOf(this))throw Error(`Cannot put ${this} into itself`);let n="stacking"===t._t.order?0:t._t.children.length;void 0!==e?.position&&(n=e.position>=0?e.position:t._t.children.length+e.position+1),void 0!==e?.fromTop&&(n=e.fromTop),void 0!==e?.fromBottom&&(n=t._t.children.length-e.fromBottom);const i=this._t.parent,o=this._t.parent._t.children.indexOf(this);this.hasChangedParent()&&this.game.addDelay(),this._t.parent._t.children.splice(o,1),this._t.parent=t,t._t.children.splice(n,0,this),i!==t&&(delete this.row,delete this.column,e?.placement&&(this.column=e.placement.column,this.row=e.placement.row),t instanceof r.Z&&t.triggerEvent("enter",this),i instanceof r.Z&&i.triggerEvent("exit",this))}remove(){return this.putInto(this._ctx.removed)}}class a extends o{constructor(){super(...arguments),this.sides=6,this.current=1,this.flip=!1}roll(){this.current=Math.ceil((this._ctx.game?.random||Math.random)()*this.sides),this.flip=!this.flip}}const s=()=>({GameElement:i.Z,Space:r.Z,Piece:o,Die:a})}}]);